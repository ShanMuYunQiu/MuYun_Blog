---
title: C语言基础教程
author: 圣奇宝枣
description: 有关于C语言的基础教程，包括基本语法与基础的逻辑知识，比较适合新手上手
sticky: 1
date: 2022-05-09 08:21:06
updated: 2022-05-25 10:37:56
tags:
  - C语言
  - 基础语法
  - 教程分享
categories:
  - 编程语言
---

---

#### **初识 C 语言**

---

> **章节概要**：C 语言的特点、计算机工作原理、高级计算机语言、编译器、编程步骤、C 编程机制

##### **特点**

- **设计特性**：
  > C 语言融合了**计算机科学理论**和**实践的控制特性**  
  > C 语言的设计理念让用户轻松完成**自顶向下的规划**、**结构化编程**和**模块化设计**
- **高效性**：
  > C 语言充分利用计算机的优势，因此**程序更紧凑**，**运行速度很快**  
  > C 语言具有通常汇编语言才具有的微调控制能力，可以更具具体情况**微调程序**以获得**最大运行速度**或**最有效地使用内存**
- **可移植性**：
  > C 是可移植的语言，这意味着，在一种系统中编写的 C 程序**稍作修改**或**不修改**就能在其他系统上运行  
  > 注意程序中针对**特殊硬件设备**(如显示监视器)或**操作系统特殊功能**编写的部分**通常不可移植**  
  > C 语言与 UNIX 关系密切，**UNIX 系统**通常会将 C 编译器作为**软件包**的一部分  
  > 供个人计算机使用的 C 编译器很多，因此在**各个版本的操作系统**上，都可以找到合适的 C 编译器
- **强大而灵活**：
  > C 语言功能**强大而灵活**  
  > UNIX 操作系统、其他语言(FORTRAN、Perl、Python、Pascal)等的**编译器**和**解释器**都是**用 C 语言编写**的
- **面向程序员**：
  > C 语言是为了满足程序员的需求而设计的，程序员可以利用 C **访问硬件**、**操控内存中的位**  
  > 大多数 C 实现都有一个**大型的库**，包含众多有用的 **C 函数**，可以让程序员更加方便地使用 C 语言

##### **通俗了解计算机工作原理**

- 简而言之，计算机的**工作原理**是：如果希望计算机做某些事，就必须为其提供**特殊的指令列表**(**程序**)，确切地告诉计算机要做的事以及如何做。你必须用**计算机能直接明白的语言**(**机器语言**)创建程序。这是一项繁杂、乏味、费力的任务

##### **高级计算机语言与编译器**

- **高级编程语言**(如 C 语言)以多种方式**简化了编程工作**。首先，不必用数字码表示指令；其次，使用的指令更贴近你如何想这个问题，而不是类似计算机那样繁琐的步骤
- **编译器**是把**高级语言**程序**翻译**成计算机能理解的**机器语言**指令集的程序，在计算机看来，高级语言指令就是一堆无法理解的无用数据。由此，程序员进行高级思维活动，而编译器则负责处理冗长乏味的细节工作

##### **使用 C 语言的 7 个步骤**

- C 是**编译型语言**，我们把编写 C 语言的程序分解为七个步骤：
  > 1、定义程序的目标  
  > 2、设计程序  
  > 3、编写代码  
  > 4、编译  
  > 5、运行程序  
  > 6、测试与调试程序  
  > 7、维护和修改代码

##### **编程机制**

- 用 C 语言编写程序时，编写的内容被储存在文本文件中，该文件被称为**源代码文件**(**source code file**)。大部分 C 系统，都要求文件名以`.c`结尾
- C 编程的**基本策略**是，用程序把**源代码**文件**转换**成**可执行文件**(其中包含可直接运行的机器语言代码)  
  典型的 C 实现通过**编译**和**链接**两个步骤来完成这一过程。**编译器**把源代码转换成**中间代码**，**连接器**把中间代码和其他代码**合并**，生成可执行文件  
  ![](https://s2.loli.net/2022/05/22/ZyhE6a39RIPUOg4.png)

---

#### **C 语言概述**

---

> **章节概要**：C 语言程序简单示例、`#include`与头文件、主函数`main`、注释、花括号、声明与变量、赋值、`printf`函数、`return`语句、C 语言程序基础结构、多条声明、打印多个值、多个函数、关键字和保留标识符

##### **简单的 C 程序示例及分析**

```c
#include <stdio.h>

int main(void)                //一个简单的C程序
{
    int num;                  //定义一个名为num的变量
    num = 1;                  //为num赋一个值
    printf("I am a simple "); //使用printf函数
    printf("computer.\n");
    printf("my favourite number is %d because it is fitst.\n", num);
    return 0;
}
```

- **程序分析及知识概要**

  - `#include`指令和**头文件**
    > 1、`#include <stdio.h>`在程序的**第一行**，该语句作用相当于把`stdio.h`**文件**中的**所有内容**都**输入该行所在位置**，本质上是一种“**拷贝-粘贴**”的操作。`include`文件提供了一种方便的途径共享许多程序共有的信息  
    > 2、`#include`这行代码是一条 C**预处理器命令**，通常，C 编译器在编译前会对源码做一些**准备工作**，即**预处理**  
    > 3、所有的 C 编译器软件都提供`stdio.h`头文件，该文件包含供编译器使用的**IO 函数**(**I:input 输入，O:output 输出**)。该文件名含义为**标准输入/输出头文件**。通常，C 程序顶部的信息集合被称为**头文件**
  - `main()`函数
    > 1、`main()`函数是程序的**主函数**，它是程序的入口点，**从这里开始执行**  
    > 2、`int main()`中`int`是函数的**返回类型**，表明函数**返回操作系统**的是**整数**，此处将在后续探讨  
    > 3、如果浏览旧式的 C 代码，会发现程序如`main()`开始，C90 标准勉强接受这种形式，但 C99 和 C11 标准不允许，因此不要这样写  
    > 4、你还会看到`void main()`的形式，部分编译器允许这样写，但所有标准都未认可，因此也不要这样写
  - **注释**
    > 1、注释是一种**记录程序信息**的方式，**被注释的部分不会被程序运行**  
    > 2、可以使用`/*注释内容*/`进行注释，此类注释可以换行注释，直到`*/`为止  
    > 3、也可以使用`//`进行注释(C99 新加入)，此类注释不能换行，直到行尾为止
  - **花括号**
    > 1、程序中花括号`{}`把`main()`括起来，一般而言，所有的**C 函数**都**使用花括号标记**函数体的**开始和结束**  
    > 2、花括号还可用于把函数中**多条语句**合并为一个**单元**和**块**
  - **声明与变量**
    > 1、`int num;`这行代码叫做**声明**，声明是 C 语言中最重要的特性之一  
    > 2、该条例中，声明**完成了两件事**。其一，函数中**有一个**名为`num`的**变量**，其二，`int`表示`num`的**数据类型**是一个**整数**  
    > 3、`int`是 C 语言中的一个**关键字**，表示一种基本的 C 语言**数据类型**。关键字是**语言定义的单词**，不能用做其他用途，例如不可作为函数名或变量名  
    > 4、`num`是一个**标识符**，也就是一个**变量、函数或其他实体**的**名称**  
    > 5、把**变量**声明正确的为**数据类型**(整型、浮点型、字符等)，**计算机**才能正确的**存储、读取和解释数据**  
    > 6、变量的**命名**，要尽可能使用**有意义**的变量名或标识符，如程序需要一个变量属羊，则可起名**sheep_count**。变量命名时仅可以使用**大小写字母、数字和下划线**，且第一个字母不能是数字
  - **赋值**
    > 1、`num = 1`是**赋值表达式语句**，**赋值**是 C 语言的**基本操作**之一，意为“**把值 1 赋给变量**`num`”  
    > 2、在执行`int num`声明时，编译器在计算机**内存**中为变量`num`**预留了空间**，然后执行赋值表达式语句时，把值存储在**预留的位置**  
    > 3、注意，赋值表达式语句**从右侧把值赋给左侧**，另外，该语句以分号`;`结尾
  - `printf`函数
    > 1、`printf`是 C 语言的一个**标准函数**，圆括号`()`表明`printf`是一个**函数名**，**圆括号中的内容**是从`main()`函数**传递**给`printf`函数的信息  
    > 2、`printf`函数会查看**双引号中的内容**(**字符串**)，并将其**打印**到屏幕上  
    > 3、`\n`的作用是**换行**，`\n`组合代表一个**换行符**。换行符是一个**转义列表**，用于代表**难以表示**或**无法输入**的字符。如`\t`代表**Tab 键**，`\b`代表**Backspace 键**，每个转义序列都以**反斜杠**`\`开始  
    > 4、对比发现，参数中的`%d`被数字 1**代替**了，而 1 就是`num`的值。`%d`是一个**占位符**，其作用是**指明**输入`num`的**位置**
  - `return`语句
    > 1、`int main(void)`中的`int`表明函数`main`要**返回一个整数**，C 标准**要求**`main()`这样做。  
    > 2、**有返回值**的 C 函数要有`return`语句，该语句以`return`关键字**开始**，后面是**待返回的值**，并以分号`;`**结尾**  
    > 3、如果遗漏`main`函数末尾的`return`语句，程序在运行至最外面的`}`时，会自动**返回**一个**默认值**，**即 0**。因此此处**可以省略**，但在**其他**有返回值的函数中**不可省略**，所以**建议保留**此习惯

- **简单程序的结构**

  - 程序由**一个或多个函数**组成，**必须有**`main()`函数。
  - 函数由**函数头**和**函数体**组成，函数头包括**函数名**、**传入该函数的信息类型**和**函数的返回值类型**
  - 通过**函数名后**的**圆括号**可以识别出函数，圆括号里**可能为空**，**可能有参数**
  - **函数体**被**花括号**括起来，由一系列**语句**、**声明**组成

  ![](https://s2.loli.net/2022/05/22/Rm4WvcyqaZkgLuQ.png)

  - 简言之，一个简单的 C 语言程序格式如下(**大部分语句**都以**分号**`;`**结尾**)：

  ```c
  #include <stdio.h>

  int main(void)
  {
      //语句
      return 0;
  }
  ```

##### **进一步使用 C**

```c
//把2英寻转换成英尺
#include <stdio.h>

int main(void)
{
    int feet, fathoms;
    fathoms = 2;
    feet = 6 * fathoms;
    printf("There are %d feet in %d fathoms!\n", feet, fathoms);
    printf("Yes,I said %d feet!\n", 6 * fathoms);
    return 0;
}
```

- **程序分析及知识概要**
  - **多条声明**
    > 1、`int feet, fathoms;`语句，使用**多条声明**声明了**两个变量**，使用**逗号**`,`隔开，此语句与`int feet;`+`int fathoms;`等价
  - **打印多个值**
    > 1、程序的**第一个**`printf()`进行了**两次替换**，**按顺序**将`feet`、`fathoms`替换了两个`%d`  
    > 2、第二个`printf()`说明待打印的值**不一定是变量**，只要**可求值**得出**合适类型值的项**即可

##### **多个函数**

- 把**自己的函数**添加到程序中，此处只做简单了解，后续学习：

```c
#include <stdio.h>

void def(void)
{
    printf("hello world!");
}

int main(void)
{
    def();
    return 0;
}
```

##### **关键字和保留标识符**

- 下表中**粗体**表示`C90`标准新增关键字，*斜体*表示`C99`标准新增关键字，**_粗斜体_** 表示`C11`标准新增关键字  
  ![](https://s2.loli.net/2022/05/22/Ky2JEGjgcLb3t1q.png)

---

#### **数据和 C**

---

> **章节概要**：交互式程序、变量与常量数据、数据、数据类型关键字、C 语言基本数据类型、进制打印显示(int 类型中)、可移植类型、使用程序获得数据类型大小

##### **示例程序(交互式程序引入)**

```c
#include <stdio.h>

int main(void)
{
    float weight;
    float value;
    printf("Please enter your weight in pounds:");
    scanf("%f", &weight);
    value = 1700.0 * weight * 14.5833;
    printf("your weight in platinum is worth $%.2f.\n", value);
    return 0;
}
```

- **新元素简单分析**
  - 新的**变量声明**，使用`float`**浮点数**类型，浮点类型可以**储存带小数的数字**，详细说明见本章后面部分
  - 为了打印**新类型**的变量(**浮点数**)，`printf`处使用`%f`**处理浮点值**了
  - `%.2f`用于**精确控制输出**，指定**保留小数**后两位
  - `scanf()`函数用于**读取键盘的输入**，`%f`说明`scanf()`**读取输入浮点数**，`&weight`告诉`scanf()`把输入的值**赋给**名为`weight`的**变量**
  - `scanf()`函数使用`&`**符号**表明找到`weight`变量的地点，下章将详细讨论，目前请按照这样写

##### **变量与常量数据**

- **变量**：有些**数据类型**在程序运行期间**可能会改变**或**被赋值**，这些称为**变量**
- **常量**：有些**数据类型**在程序使用之前已经**预先设定**好了，整个程序运行过程中**没有变化**，称为**常量**

##### **数据**

- **位、字节、字**

  > **位、字节、字**是描述**计算机数据单元**或**存储单元**的术语，这里主要指**储存单元**
  >
  > **位**(**bit**)：**最小的储存单元**。可以储存**0 或 1**，是计算机内存的**基本构成块**  
  > **字节**(**byte**)：**常用的**计算机存储单位，**字节**是**位**的**集合**，一个**字节**可以储存**8 位**。这是字节的**标准定义**，至少在衡量存储单位时是这样  
  > **字**(**word**)：是**设计计算机时**给定的**自然存储单位**，对于 8 位的微型计算机，一个字长只有 8 位。从那以后，个人计算机字节增至 16 位、32 位，直至目前的 64 位。计算机的**字长越大**，**数据转移越快**，允许的**内存访问也更多**

- **整数**

  - 和数学概念一样，**整数是没有小数部分的数**，例如 2、-23、2456 都是整数
  - 计算机以**二进制数字**存储整数，如整数 **7** 二进制写为 **111**，因此要在**8 位字节**中存储该数字，需要**前 5 位**设置为**0**，**后 3 位**设置为**1**

  ![](https://s2.loli.net/2022/05/22/lB6cG1hnKCqD8mY.png)

- **浮点数**

  - 与数学中**实数**概念差不多，例如 2.75、3.16E7、7.00、2e-8 都是浮点数
  - 注意，在一个值后面**加上小数点**，该值就成为一个**浮点数**，所以**7 是整数**，**7.00 是浮点数**
  - 此处简要介绍**e 计数法**(**科学计数法**)：**3.16E7**表示`3.16 * 10^7`
  - 这里关键要理解**浮点数**与**整数**的**储存方案不同**，计算机把浮点数分成**小数部分**和**指数部分**表示，而且**分开存储这两部分**。**7.0**写成**0.7E1**，这里，**0.7 是小数部分**，**1 是指数部分**。计算机在内部使用**二进制**和**2 的幂**进行储存，后续探讨(**此处图例以十进制下理解为例**)

  ![](https://s2.loli.net/2022/05/22/3JspxLR21l7TcDd.png)

##### **数据类型关键字**

![](https://s2.loli.net/2022/05/22/XvZ8JeBSqV9ryPl.png)

##### **C 语言基本数据类型**

- `int`**类型**

  > 1、C 语言中的**整数类型**可表示**不同的取值范围**和**正负值**，一般情况下使用`int`能应付绝大多数情况  
  > 2、`int`类型是**有符号整型**，即`int`的值**必须是整数**，可以是正整数、负整数、0  
  > 3、`int`类型的**取值范围**因**计算机系统而异**，一般而言，储存一个`int`要**占用一个机器字长**  
  > 4、早期**16 位**的取值范围为`-2^15 ~ 2^15-1`，即`-32768 ~ 32767`，**ISO C 规定**`int`**最小范围**为`-32768 ~ 32767`  
  > 5、一般来说，系统会用一个**特殊位的值**(**未使用的第 16 位**)表示**有符号整数**的**正负号**  
  > 6、使用`%d`**打印**整数类型，`%d`称为**转换说明**，他**指定**应该用什么**格式**显示一个值  
  > 7、**显示不同进制**：使用`%d`显示十进制，`%o`显示八进制，`%x`显示十六进制。**显示前缀**使用`%#o`、`%#x`、`%#X`

  ```c
  #include <stdio.h>

  int main(void)
  {
      int x = 100;
      printf("dec=%d ; octal=%o ; hex=%x  \n", x, x, x);
      printf("dec=%#o ; octal=%#x ; hex=%#X", x, x, x);
      return 0;
  }
  ```

- **其他整数类型**

  > 1、`short`类型：占用空间可能比`int`少，有符号类型  
  > 2、`long`类型：占用空间可能比`int`多，有符号类型  
  > 3、`long long`类型(**C99 加入**)：占用空间可能比`long`多，**至少 64 位**，有符号类型  
  > 4、`unsigned`类型：**非负整型**，**16 位**取值范围`0 ~ 2^16-1`，即`0 ~ 65535`  
  > 5、**C90 后**，新增`unsigned short`、`unsigned long`；**C99 后**，新增`unsigned long long`  
  > 6、在任何**有符号类型前**添加关键字`signed`，可**强调**使用有符号类型的**意图**  
  > 7、空间“**可能**”多与少是因为 C**只规定**了`short`不能多于`int`，`long`不能少于`int`  
  > 8、现在**个人计算机**常见设置是，`long long`占**64 位**，`long`占**32 位**，`int`占**16 位**或**32 位**，`short`占**16 位**  
  > 9、打印时，使用`%u`打印`unsigned`类型，使用`%ld`打印`long`类型，使用`%lld`打印`long long`类型，使用`%hd`打印`short`类型

- **浮点数类型**

  > 1、**浮点类型**能表示**包括小数**在内更大范围的数，浮点数的表示类似**科学计数法**。在计算机中，科学计数法中的 10 的**指数**，跟写在字母`e`后面，如`1.02 * 10^3`记作`1.02e3`  
  > 2、**单精度浮点数**`float`，C 语言规定其至少能表示**6 位有效数字**，且取值范围至少是`10^-37 ~ 10^37`。通常，系统储存一个浮点数要**占用 32 位**，**其中 8 位**用于表示**指数的值和符号**，**剩下 24 位**用于表示**非指数部分及其符号**  
  > 3、**双精度浮点数**`double`，其与`float`类型的**最小取值范围相同**，但必须至少能表示**10 位有效数字**，一般来说，`double`**占用 64 位**而非 32 位。一些系统将多出来的 32 位**全用来**表示**非指数部分**，不仅增加**有效数字位数**(**即精度**)，还减少了**舍入误差**；另一些系统把**其中一些位**分配给**指数部分**，以容纳**更大的指数**，增加**可表示数的范围**。无论哪种类型，`double`类型的值**至少有 13 位有效数字**  
  > 4、`long double`，可以满足比`double`更高的精度要求，不过，C 只保证`long double`类型至少与`double`类型的**精度相同**  
  > 5、浮点数后面加上`f`**或**`F`**后缀**可**覆盖默认设置**，编译器会将**浮点型常量**看做`float`类型，如**2.3f**，**9.11E9F**；使用`l`**或**`L`**后缀**使数字成为`long double`类型；没有后缀的浮点型常量是`double`类型  
  > 6、**打印浮点值**时，使用`%f`打印`float`类型，用`%e`打印**指数计数法**的浮点值，如果系统支持十六进制的浮点数，使用`%a`打印**十六进制**的浮点值，打印`double`或`long double`要使用`%Lf`、`%Le`和`%La`的转换说明

- `char`**字符类型**

  > 1、`char`类型用来**储存字符**，如**字母**或**标点符号**  
  > 2、从技术层面来看，`char`是**整数类型**，因为`char`类型**实际储存**的是**整数**而不是字符。计算机使用**数字编码**来**处理字符**，即用特定**整数**代表特定**字符**  
  > 3、C 常用编码为**ASCII**编码，其中如**整数 65**代表**大写字母 A**，**整数 97**代表**小写字母 a**，**整数 48**代表**数字 0**  
  > 4、标准**ASCII 码**范围为**0~127**，只需 7 位二进制数即可表示。通常，`char`被定义为**8 位的存储单元**  
  > 5、C 语言把**1 字节**定义为`char`类型占用的**位**(**bit**)**数**  
  > 6、`char`赋值时，需要传入**char 字符类型**的数据，即**单引号**`''`包裹的字符，如`char set = 'A'`。此外也可使用**ASCII 码**进行赋值，如`char set = 65`  
  > 7、有一些**代表行为**的**非打印字符**，如换行、退格、回车、蜂鸣等，这些字符**打印不出来**。如需要表示这些字符，可以使用**ASCII 码**，比如蜂鸣：`char beep = 7`。此外也可以使用**转义字符**，如`char beep = '\a'`  
  > 8、使用`%c`**打印**`char`类型字符，如果使用`%d`**打印**，则会打印**字符对应 ACSII 码的整数**

  ![](https://s2.loli.net/2022/05/22/gf3NWQ1Kvz4XkoR.png)

- `_Bool`**布尔类型**

  > 1、**C99**标准新增了`_Bool`类型，用于表示**布尔值**，即逻辑值**true**和**false**  
  > 2、因为 C 语言用**值 1**表示**true**，**值 0**表示**false**，所以`_Bool`类型实质上也是一种**整数类型**  
  > 3、原则上它仅占用**1 位存储空间**，因为对与**0 和 1**而言，一位的存储空间足够了

- **可移植类型：**`stdint.h`**和**`inttypes.h`

  > 1、**C99**新增两个**头文件**`stdint.h`和`inttypes.h`，以确保 C 语言**各类型**在**各系统**中**功能正常**  
  > 2、C 语言为**现有类型**创建了**更多类型名**，这些新类型名**被定义在**`stdint.h`中  
  > 3、如在**精确宽度整数类型中**，`int32_t`**表示 32 位的有符号整数类型**。在使用**32 位系统**时，头文件会把`int32_t`当做`int`的**别名**；而在`int`为**16 位**，`long`为**32 位**的系统中，系统会把`int32_t`当做`long`的别名。然后，使用`int32_t`类型**编写程序并包含**`stdint.h`**头文件**时，**编译器**会把`int`或`long`**替换**成与**当前系统匹配**的类型  
  > 4、如果系统**不支持精确宽度整数类型**，可以使用**最小宽度类型**，例如`int_least8_t`是**可容纳 8 位有符号整数值**的类型中**宽度最小**的类型的一个**别名**  
  > 5、如果更关心**速度**而非空间，则可使用**最快最小宽度类型**，如`int_fast8_t`被定义为**系统中**对**8 位有符号值**而言**运算最快的整数类型**  
  > 6、如果需要**最大整数类型**，最大的有符号整数类型`intmax_t`**可储存任何有效的有符号整数值**。类似的，`uintmax_t`表示最大的无符号整数类型，这种类型可能比`long long`和`unsigned long long`**更大**  
  > 7、C 标准针对这种**输入和输出**，提供了一些**字符串宏**来显示可移植类型，例如`inttypes.h`中定义了`PRId32`**字符串宏**，代表打印**32 位有符号值**的**合适转换说明**(**如 d 或 l**)

  ```c
  #include <stdio.h>
  #include <inttypes.h>

  int main(void)
  {
      int32_t me32;
      me32 = 45933945;
      printf("me32 = %" PRId32 "\n", me32);
      return 0;
  }
  ```

- **复数和虚数**

  > 1、许多**科学**和**工程计算**都要用到**复数和虚数**，**C99**支持复数和虚数，但是**有所保留**  
  > 2、**复数类型**：有`float_Complex`、`double_Complex`和`long double_Complex`。例如`float_Complex`变量应包含**两个**`float`**类型的值**，分别表示复数的**实部和虚部**  
  > 3、**虚数类型**：有`float_Imaginary`、`double_Imaginary`和`long double_Imaginary`  
  > 4、如果包含`complex.h`头文件，便可用`complex`代替`_Complex`，用`imaginary`代替`_Imaginary`，还可以用 1 代替-1 的平方根

- **其他类型**

  > 1、C 语言中**没有字符串类型**，却也能很好的处理字符串，详见后续  
  > 2、C 语言还有一些**基本类型衍生**的其他类型，如数组、指针、结构、联合，详见后续  
  > 3、本章程序案例简单使用到了**指针**，如`scanf()`函数用到的`&`前缀，便创建了一个指针，告诉`scanf()`把数据放在何处

##### **获取类型大小**

- 可以使用`sizeof()`获取以**字节**为单位的**类型大小**，**C99**和**C11**提供`%zd`匹配`sizeof()`返回值，其余不支持的编译器可用`%u`或`%lu`代替

```c
#include <stdio.h>

int main(void)
{
    printf("Type int has a size of %zd bytes.\n", sizeof(int));
    printf("Type char has a size of %zd bytes.\n", sizeof(char));
    printf("Type float has a size of %zd bytes.\n", sizeof(float));
    return 0;
}
```

---

#### **字符串和格式化输入输出**

---

> **章节概要**：字符串简介、char 类型数组与 null 字符、`strlen()`函数、常量与 C 预处理器、明示常量、`printf()`函数、参数传递、`scanf()`函数

##### **示例程序**

```c
#include <stdio.h>
#include <string.h>

#define DENSITY 62.4 // 定义人体密度

int main(void)
{
    float weight, volume;
    int size, letters;
    char name[40];
    printf("Hi! What's your first name?\n");
    scanf("%s", name);
    printf("%s,whats's your weight in pounds?\n", name);
    scanf("%f", &weight);
    size = sizeof(name);
    letters = strlen(name);
    volume = weight / DENSITY;
    printf("well, %s, your volume is %2.2f cubic feet\n", name, volume);
    printf("Also, your first name has %d letters,\n", letters);
    printf("and we have %d bytes to store it.\n", size);
    return 0;
}
```

- **新元素简单分析**

  - 用**数组**储存**字符串**。在该程序中，用户**输入的名**被储存在**数组**中，该数组占用内存中**40 个连续的字节**，每个字节储存一个字符值
  - 使用`%s`**转换说明**来**处理字符串**的输入和输出。注意，在`scanf`中，`name`**没有**`&`**前缀**，而`weight`有(稍后解释，`&weight`和`name`都是**地址**)
  - 用 C**预处理器**把**字符常量**`DENSITY`定义为 62.4
  - 用 C 函数`strlen()`获取字符串的长度

##### **字符串简介**

- **字符串**是**一个或多个字符**的**序列**，如`"I came from America"`
- **双引号**`"`不是字符串的一部分，仅是**告知编译器**它**括起来的是字符串**，就如**单引号**`'`用于标识单个字符一样

##### **char 类型数组与 null 字符**

- C 语言**没有**专门用于**存储字符串**的变量类型，字符都被储存在`char`**类型数组**中。**数组**由**连续的存储单元**组成，字符串的**字符**被储存在**相邻的存储单元**中，每个单元储存一个字符
- 数组**末尾位置**有一个**空字符**(**\0**)，C 语言用**空字符**(**null**)标记**字符串结束**。这意味着**数组容量**必须**比存储字符数多 1**
- **数组**是**同类型数据元素**的**有序序列**，**方括号**`[]`表示这是一个数组
- 使用`%s`来转换**打印**一个**字符串**
- **字符串**与**字符**`char`不是同一种类型，因为**字符串**最后有**空字符标识**，而`char`**只存储该字符**
- 使用`strlen()`函数可以得到**字符串的字符长度**，且`strlen()`并**不会计入空字符**

##### **常量与 C 预处理器**

- **为什么要使用常量**

  - 使用常量名比数字**表达的信息更多**，如`area = PI * d`与`area = 3.14 * d`相比**更加直观**
  - 对于程序中**多次使用同一个常量时**，如果常量的值需要**修改**，**只需要修改常量值**即可

- **如何创建符号常量**

  - 可以**定义变量**，将**其值**定义为**所需的值**，但这样程序可能会**无意间改变它的值**
  - 使用**C 预处理器**定义，格式为`#define 常量名 值`，**编译程序时**，所有的**常量名**都会**被替换**为它们的值
    - 定义常量时，**习惯上**建议**全用大写**，以此**告知他人**这是一个常量，提高程序可读性；此外也有**小众习惯**使用`c_变量名`或`k_变量名`表示常量
    - **注意**：`define`常量名后的内容用于替换符号常量，不要将`#define NUM 20`写成`#define NUM = 20`，这样定义的**WORD**值为`=20`而非`20`
  - **C90**标准新增限定词`const`，表示**只读**，也可用此**作为**常量使用(其只表明**只读变量**)，如`const float PI=3.14`

- **明示常量**

  - C 头文件`limits.h`与`float.h`分别提供与**整数与浮点数**类型**大小限制**相关的说明，如`limits.h`中有类似以下代码：
    ```c
    #define INT_MAX +32767
    #define INT_MIN -32768
    ```
  - 这些**明示常量**代表`int`类型可表示的**最大值和最小值**，**该头文件**会为这些明示常量提供**不同的值**，如果系统使用**32 位的 int**且程序包含`limits.h`头文件，则可以使用`printf()`与`%d`转换输出**该常量 32 位 int 的值**
  - 如果系统使用**4 字节的 int**，**该头文件**将提供**符合 4 字节的对应值**
  - 下为`limits.h`中的一些明示常量：  
    ![](https://s2.loli.net/2022/05/23/GBXZ3wrmLe8IN6c.png)
  - 相似的，`float.h`头文件下也有一些明示常量：  
    ![](https://s2.loli.net/2022/05/23/QHkBX7M4ojaAcLp.png)

##### **printf()函数**

- 请求`printf()`打印数据的**指令**要与待打印**数据类型**相匹配。例如，**打印整数**使用`%d`，**打印字符**使用`%c`。这些符号称为**转换说明**，它们指定如何把数据转换成**可显示的形式**。

- **ANSI C**标准为`printf()`提供的转换函数  
  ![](https://s2.loli.net/2022/05/25/7k51uW8zEf6bL9N.png)

- `prinft()`的**转换说明**修饰符，在`%`与**转换字符**之间插入**修饰符**可修饰基本转换说明  
  ![](https://s2.loli.net/2022/05/25/5ljyR7EU64Ot2hi.png)

  - 注：`%u`标记**不能把数字和符号分开**，会报错!!

- `printf()`中的**标记**  
  ![](https://s2.loli.net/2022/05/25/45tZBJpa3WnyuvQ.png)

##### **参数传递**

- **参数传递机制**因实现而异，下面以**本机系统**中的**本程序**分析参数传递。该调用告诉计算机把**变量 n1、n2、n3、n4**的值传递给程序，是一种**常见的传参方式**

  ```c
  #include <stdio.h>
  int main(void)
  {
      float n1 = 3.0;
      double n2 = 3.0;
      long n3 = 2000000000;
      long n4 = 1234567890;
      printf("%ld  %ld  %ld  %ld", n1, n2, n3, n4);
      return 0;
  }
  ```

  > 1、程序把**传入的值**放入被称为**栈**的**内存区域**，计算机根据**变量类型**(**不是转换说明**)把值放入**栈**中。  
  > 2、因此，**n1**被储存在**栈**中，**占 8 字节**(**float 被转换成 double 类型**)。同样，**n2**在**栈**中也占**8 字节**，而**n3、n4**分别占**4 字节**  
  > 3、然后，控制转到`printf()`，其根据**转换说明**从**栈**中读取值。`%ld`转换说明表明**应读取 4 字节**，所以`printf()`读取**前 4 字节**作为**第 1 个值**。这是**n1 前半部分**，将被解释成**long 类型整数**，根据下一个转换说明，`printf()`**再读取 4 字节**，这是**n1 后半部分**，将被解释为**第 2 个 long 类型整数**  
  > 4、类似的，继续读取**第 3、4 个**`%ld`，读取为**n2 的前、后半部分**，并解释成**两个 long 类型整数**  
  > 5、因此，对于**n3、n4**虽然用对了转换说明，但还是**读错了字节**

  ![](https://s2.loli.net/2022/05/25/jvdeNSciuAJbRaY.png)

##### **scanf()函数**

- 码字中

---

#### **页底评论**

---
