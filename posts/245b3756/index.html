<!DOCTYPE html><html lang="zh-CN"><head><!-- hexo injector head_begin start --><link href="https://cdn.jsdelivr.net/npm/hexo-widget-tree@0.2.2/css/index.css" rel="stylesheet"/><!-- hexo injector head_begin end --><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="	#ff8533"><meta name="author" content="山暮云秋"><meta name="copyright" content="山暮云秋"><meta name="generator" content="Hexo 6.3.0"><meta name="theme" content="hexo-theme-yun"><title>Python3爬虫基础 | 山暮云秋 | Blog</title><link rel="stylesheet" href="https://jsd.vxo.im/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://jsd.vxo.im/npm/prism-theme-vars/base.css"><script src="https://jsd.vxo.im/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="stylesheet" type="text/css" href="https://jsd.vxo.im/npm/katex@latest/dist/katex.min.css"><script defer src="https://jsd.vxo.im/npm/katex@latest/dist/katex.min.js"></script><link rel="stylesheet" type="text/css" href="https://jsd.vxo.im/npm/katex@latest/dist/contrib/copy-tex.min.css"><script defer src="https://jsd.vxo.im/npm/katex@latest/dist/contrib/copy-tex.min.js"></script><script defer src="https://jsd.vxo.im/npm/katex@latest/dist/contrib/auto-render.min.js"></script><script type="module">import { renderKatex } from '/js/utils.js'
document.addEventListener("DOMContentLoaded", () => {
  renderKatex({
    ...{},
    ...undefined?.options,
  });
});</script><link class="aplayer-style-marker" rel="stylesheet" type="text/css" href="https://jsd.vxo.im/npm/aplayer@latest/dist/APlayer.min.css"><script class="aplayer-script-marker" src="https://jsd.vxo.im/npm/aplayer@latest/dist/APlayer.min.js" defer></script><script src="https://jsd.vxo.im/npm/pjax@latest/pjax.min.js" defer></script><script src="/js/pjax.js" defer type="module"></script><script src="https://jsd.vxo.im/npm/vue@2.6.14"></script><link rel="icon" type="image/png" href="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/info/user.jpg"><link rel="mask-icon" href="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/info/user.jpg" color="	#ff8533"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://jsd.vxo.im/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"blog.muyun.space","root":"/","title":"山暮云秋的空间","version":"1.10.11","mode":"time","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn?c=a&c=d&c=e&c=f&c=i&c=j&c=k","hitokoto":true},"local_search":{"path":"/search.xml"},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":["255, 117, 25","255, 163, 102","255, 209, 179"]},"waline":{"config":{"enable":true,"serverURL":"https://waline.muyun.space/","comment":true,"visitor":false,"emoji":["https://emoji.shojo.cn/bili/webp/仓鼠","https://emoji.shojo.cn/bili/webp/仓鼠松鼠","https://emoji.shojo.cn/bili/webp/东爱璃Lovely","https://emoji.shojo.cn/bili/webp/星汐seki","https://emoji.shojo.cn/bili/webp/咩栗","https://emoji.shojo.cn/bili/webp/呜米","https://emoji.shojo.cn/bili/webp/枕边童话","https://emoji.shojo.cn/bili/webp/美月もも","https://emoji.shojo.cn/bili/webp/雫るる制服ver","https://emoji.shojo.cn/bili/webp/雫るる","https://emoji.shojo.cn/bili/webp/梦音茶糯","https://unpkg.com/@waline/emojis@1.2.0/bilibili","https://unpkg.com/@waline/emojis@1.2.0/bmoji","https://unpkg.com/@waline/emojis@1.2.0/weibo","https://unpkg.com/@waline/emojis@1.2.0/qq"],"locale":{"placeholder":"填写邮箱，可以收到回复通知哦～"},"requiredMeta":["nick"],"el":"#waline","lang":"zh-CN"},"cdn":"https://jsd.vxo.im/npm/@waline/client@v2/dist/waline.js","dark":"html.dark"},"vendors":{"host":"https://jsd.vxo.im/npm/","darken":"https://jsd.vxo.im/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="stylesheet" href="https://fonts.font.im/css2?family=Noto+Serif+SC:wght@900&amp;display=swap"><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><meta name="description" content="Python3的爬虫教程，包含爬虫所用各个模块教程与信息提取教程">
<meta property="og:type" content="article">
<meta property="og:title" content="Python3爬虫基础">
<meta property="og:url" content="https://blog.muyun.space/posts/245b3756/index.html">
<meta property="og:site_name" content="山暮云秋 | Blog">
<meta property="og:description" content="Python3的爬虫教程，包含爬虫所用各个模块教程与信息提取教程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%831.png">
<meta property="og:image" content="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%832.png">
<meta property="og:image" content="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%833.png">
<meta property="og:image" content="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%834.png">
<meta property="og:image" content="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%835.png">
<meta property="og:image" content="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%836.png">
<meta property="article:published_time" content="2022-04-27T16:00:00.000Z">
<meta property="article:modified_time" content="2022-05-08T16:00:00.000Z">
<meta property="article:author" content="山暮云秋">
<meta property="article:tag" content="Python3">
<meta property="article:tag" content="基础语法">
<meta property="article:tag" content="网页爬虫">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%831.png"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://jsd.vxo.im/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="山暮云秋"><img width="96" loading="lazy" src="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/info/user.jpg" alt="山暮云秋"><span class="site-author-status" title="精神状态美丽">😇</span></a><div class="site-author-name"><a href="/about/">山暮云秋</a></div><a class="site-name" href="/about/site.html">山暮云秋 | Blog</a><sub class="site-subtitle">千里关山边草暮，一星烽火朔云秋</sub><div class="site-description">知识分享与生活记录</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">65</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">7</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">83</span></a></div><a class="site-state-item hty-icon-button" href="/talks/" title="《道是寻常》——我的说说"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:chat-smile-3-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://muyun.space" title="个人主页" target="_blank" style="color:#ff8533"><span class="icon iconify" data-icon="ri:account-circle-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/social/wechat.png" title="微信" target="_blank" style="color:#1AAD19"><span class="icon iconify" data-icon="ri:wechat-2-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/social/QQ.png" title="QQ" target="_blank" style="color:#12B7F5"><span class="icon iconify" data-icon="ri:qq-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/ShanMuYunQiu" title="GitHub" target="_blank" style="color:#181717"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/347061710" title="Bilibili" target="_blank" style="color:#FB7299"><span class="icon iconify" data-icon="ri:bilibili-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=509242587" title="网易云音乐" target="_blank" style="color:#E60026"><span class="icon iconify" data-icon="ri:netease-cloud-music-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://500px.com.cn/ShanMuYunQiu" title="500px" target="_blank" style="color:#181717"><span class="icon iconify" data-icon="ri:number-5"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://tuchong.com/28695963/" title="图虫" target="_blank" style="color:#E9357B"><span class="icon iconify" data-icon="ri:multi-image-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://waline.muyun.space/ui" title="评论管理" target="_blank" style="color:#66b3ff"><span class="icon iconify" data-icon="ri:chat-settings-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://bk.muyun.space/talks.html" title="后台管理" target="_blank" style="color:#bb99ff"><span class="icon iconify" data-icon="ri:terminal-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="《萤火虫小巷》——友情链接" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a><a class="links-item hty-icon-button" href="/girls/" title="《泡沫之夏》——喜欢的角色" style="color:hotpink"><span class="icon iconify" data-icon="ri:women-line"></span></a><a class="links-item hty-icon-button" href="/donate/" title="《月亮与六便士》——打赏与鸣谢" style="color:#ff8533"><span class="icon iconify" data-icon="ri:hand-coin-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A8"><span class="toc-number">1.</span> <span class="toc-text">爬虫简单入门</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E5%90%88%E6%B3%95%E6%80%A7-%E5%90%9B%E5%AD%90%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.1.</span> <span class="toc-text">爬虫合法性-君子协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.2.</span> <span class="toc-text">准备注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%8B%E5%88%83%E4%B8%80%E4%B8%AA%E5%B0%8F%E7%88%AC%E8%99%AB-request-%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.3.</span> <span class="toc-text">手刃一个小爬虫(request 模块实现)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Web-%E8%AF%B7%E6%B1%82%E3%80%81HTTP-%E5%8D%8F%E8%AE%AE%E3%80%81%E6%8A%93%E5%8C%85"><span class="toc-number">2.</span> <span class="toc-text">Web 请求、HTTP 协议、抓包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Web-%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B%E8%A7%A3%E6%9E%90"><span class="toc-number">2.1.</span> <span class="toc-text">Web 请求过程解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP-%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.2.</span> <span class="toc-text">HTTP 协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#requests-%E6%A8%A1%E5%9D%97%E5%85%A5%E9%97%A8"><span class="toc-number">3.</span> <span class="toc-text">requests 模块入门</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%AE%89%E8%A3%85"><span class="toc-number">3.1.</span> <span class="toc-text">模块安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Requests-%E5%85%A5%E9%97%A8-1"><span class="toc-number">3.2.</span> <span class="toc-text">Requests 入门-1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Requests-%E5%85%A5%E9%97%A8-2"><span class="toc-number">3.3.</span> <span class="toc-text">Requests 入门-2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Requests-%E5%85%A5%E9%97%A8-3"><span class="toc-number">3.4.</span> <span class="toc-text">Requests 入门-3</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90"><span class="toc-number">4.</span> <span class="toc-text">数据解析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%E6%A6%82%E8%BF%B0"><span class="toc-number">4.1.</span> <span class="toc-text">数据解析概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Re-%E8%A7%A3%E6%9E%90-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">4.2.</span> <span class="toc-text">Re 解析_正则表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Bs4-%E8%A7%A3%E6%9E%90-HTML-%E8%AF%AD%E6%B3%95"><span class="toc-number">4.3.</span> <span class="toc-text">Bs4 解析_HTML 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Xpath-%E8%A7%A3%E6%9E%90-XML-%E6%A6%82%E5%BF%B5"><span class="toc-number">4.4.</span> <span class="toc-text">Xpath 解析_XML 概念</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python-%E5%AE%9E%E7%8E%B0-Re-%E8%A7%A3%E6%9E%90"><span class="toc-number">5.</span> <span class="toc-text">python 实现 Re 解析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Python-%E7%9A%84-re-%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8"><span class="toc-number">5.1.</span> <span class="toc-text">Python 的 re 模块使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%8B%E5%88%83%E8%B1%86%E7%93%A3-top250"><span class="toc-number">5.2.</span> <span class="toc-text">手刃豆瓣 top250</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%A0%E6%88%AE%E7%9B%97%E7%89%88%E5%A4%A9%E5%A0%82%E7%94%B5%E5%BD%B1%E4%BF%A1%E6%81%AF"><span class="toc-number">5.3.</span> <span class="toc-text">屠戮盗版天堂电影信息</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python-%E5%AE%9E%E7%8E%B0-Bs4-%E8%A7%A3%E6%9E%90"><span class="toc-number">6.</span> <span class="toc-text">python 实现 Bs4 解析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Python-%E7%9A%84-bs4-%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8"><span class="toc-number">6.1.</span> <span class="toc-text">Python 的 bs4 模块使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%93%E5%8F%96%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%8C%97%E4%BA%AC%E6%96%B0%E5%8F%91%E5%9C%B0%E8%8F%9C%E4%BB%B7-%E5%B7%B2%E5%A4%B1%E6%95%88%EF%BC%8C%E4%BB%85%E5%8F%AF%E5%8F%82%E8%80%83"><span class="toc-number">6.2.</span> <span class="toc-text">抓取示例：北京新发地菜价(已失效，仅可参考)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%93%E5%8F%96%E4%BC%98%E7%BE%8E%E5%9B%BE%E5%BA%93%E7%9A%84%E5%9B%BE%E7%89%87-%E5%B7%B2%E5%A4%B1%E6%95%88%EF%BC%8C%E4%BB%85%E5%8F%AF%E5%8F%82%E8%80%83"><span class="toc-number">6.3.</span> <span class="toc-text">抓取优美图库的图片(已失效，仅可参考)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python-%E5%AE%9E%E7%8E%B0-Xpath-%E8%A7%A3%E6%9E%90"><span class="toc-number">7.</span> <span class="toc-text">python 实现 Xpath 解析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Python-%E7%9A%84-lxml-%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8"><span class="toc-number">7.1.</span> <span class="toc-text">Python 的 lxml 模块使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#python-%E4%B8%AD-xpath-%E8%A7%A3%E6%9E%90%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">7.2.</span> <span class="toc-text">python 中 xpath 解析的使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#requests-%E6%A8%A1%E5%9D%97%E8%BF%9B%E9%98%B6"><span class="toc-number">8.</span> <span class="toc-text">requests 模块进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#requests-%E8%BF%9B%E9%98%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">8.1.</span> <span class="toc-text">requests 进阶概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86-cookie-%E6%A8%A1%E6%8B%9F%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95"><span class="toc-number">8.2.</span> <span class="toc-text">处理 cookie 模拟浏览器登录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B2%E7%9B%97%E9%93%BE%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">8.3.</span> <span class="toc-text">防盗链的处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%90%86"><span class="toc-number">8.4.</span> <span class="toc-text">代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%E7%9A%84%E8%A1%A5%E5%85%85%E4%BD%BF%E7%94%A8"><span class="toc-number">8.5.</span> <span class="toc-text">抓包工具的补充使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E4%B8%8E%E8%BF%9B%E7%A8%8B"><span class="toc-number">9.</span> <span class="toc-text">线程与进程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-number">9.1.</span> <span class="toc-text">基础概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="toc-number">9.2.</span> <span class="toc-text">多线程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E8%BF%9B%E7%A8%8B"><span class="toc-number">9.3.</span> <span class="toc-text">多进程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E4%B8%8E%E8%BF%9B%E7%A8%8B%E6%B1%A0"><span class="toc-number">9.4.</span> <span class="toc-text">线程池与进程池</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E7%A8%8B%E4%B8%8E%E5%BC%82%E6%AD%A5"><span class="toc-number">10.</span> <span class="toc-text">协程与异步</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E7%A8%8B%E6%A6%82%E5%BF%B5"><span class="toc-number">10.1.</span> <span class="toc-text">协程概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%BC%82%E6%AD%A5%E5%8D%8F%E7%A8%8B"><span class="toc-number">10.2.</span> <span class="toc-text">多任务异步协程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5-http-%E8%AF%B7%E6%B1%82"><span class="toc-number">11.</span> <span class="toc-text">异步 http 请求</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">11.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Python-%E7%9A%84-aiohttp-%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8"><span class="toc-number">11.2.</span> <span class="toc-text">Python 的 aiohttp 模块使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-%E4%B8%8B%E8%BD%BD%E7%BD%91%E7%AB%99%E5%9B%BE%E7%89%87"><span class="toc-number">11.3.</span> <span class="toc-text">基本语法-下载网站图片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E7%99%BE%E5%BA%A6%E5%B0%8F%E8%AF%B4%E3%80%8A%E8%A5%BF%E6%B8%B8%E8%AE%B0%E3%80%8B"><span class="toc-number">11.4.</span> <span class="toc-text">示例：百度小说《西游记》</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#selenium-%E6%A8%A1%E5%9D%97"><span class="toc-number">12.</span> <span class="toc-text">selenium 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#selenium-%E5%BC%95%E5%85%A5%E6%A6%82%E5%BF%B5"><span class="toc-number">12.1.</span> <span class="toc-text">selenium 引入概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#selenium-%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C"><span class="toc-number">12.2.</span> <span class="toc-text">selenium 基础操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E4%B9%8B%E9%97%B4%E7%9A%84%E5%88%87%E6%8D%A2"><span class="toc-number">12.3.</span> <span class="toc-text">窗口之间的切换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A0%E5%A4%B4%E6%B5%8F%E8%A7%88%E5%99%A8%E3%80%81%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95-select-%E7%9A%84%E5%A4%84%E7%90%86%E3%80%81%E6%8B%BF%E5%88%B0-elements-%E9%A1%B5%E9%9D%A2%E6%BA%90%E7%A0%81"><span class="toc-number">12.4.</span> <span class="toc-text">无头浏览器、下拉菜单 select 的处理、拿到 elements 页面源码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="toc-number">12.5.</span> <span class="toc-text">处理验证码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E5%BA%95%E8%AF%84%E8%AE%BA"><span class="toc-number">13.</span> <span class="toc-text">页底评论</span></a></li></ol></div></div></div><div class="tag-cloud"><div class="tag-cloud-tags"><a href="/tags/01Trie/" style="font-size: 12px; color: #ffc299">01Trie</a> <a href="/tags/AVL%E6%A0%91/" style="font-size: 12px; color: #ffc299">AVL树</a> <a href="/tags/BFS/" style="font-size: 21px; color: #ffa466">BFS</a> <a href="/tags/Bellman-Ford/" style="font-size: 12px; color: #ffc299">Bellman-Ford</a> <a href="/tags/C/" style="font-size: 30px; color: #ff8533">C++</a> <a href="/tags/Cmake/" style="font-size: 16.5px; color: #ffb380">Cmake</a> <a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 25.5px; color: #ff944d">C语言</a> <a href="/tags/DFS/" style="font-size: 21px; color: #ffa466">DFS</a> <a href="/tags/DP/" style="font-size: 12px; color: #ffc299">DP</a> <a href="/tags/Dijkstra/" style="font-size: 12px; color: #ffc299">Dijkstra</a> <a href="/tags/Fleury/" style="font-size: 12px; color: #ffc299">Fleury</a> <a href="/tags/Floyd/" style="font-size: 12px; color: #ffc299">Floyd</a> <a href="/tags/Hexo/" style="font-size: 25.5px; color: #ff944d">Hexo</a> <a href="/tags/Hexo%E5%8D%9A%E5%AE%A2/" style="font-size: 12px; color: #ffc299">Hexo博客</a> <a href="/tags/Hierholzer/" style="font-size: 12px; color: #ffc299">Hierholzer</a></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:	#ff8533;"><link itemprop="mainEntityOfPage" href="https://blog.muyun.space/posts/245b3756/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="山暮云秋"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="山暮云秋 | Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Python3爬虫基础<a class="post-edit-link" href="https://github.com/ShanMuYunQiu/MuYun_Blog/tree/hexo/source/_posts/编程语言/Python3爬虫基础.md" target="_blank" title="编辑" rel="noopener"><span class="icon iconify" data-icon="ri:edit-line"></span></a></h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <span class="post-meta-icon-text">发表于</span> <time title="创建时间：2022-04-28 00:00:00" itemprop="dateCreated datePublished" datetime="2022-04-28T00:00:00+08:00">2022-04-28</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <span class="post-meta-icon-text">更新于</span> <time title="修改时间：2022-05-09 00:00:00" itemprop="dateModified" datetime="2022-05-09T00:00:00+08:00">2022-05-09</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="本文字数">12k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="阅读时长">48m</span></span></span><span class="post-busuanzi"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读次数"><span class="icon iconify" data-icon="ri:eye-line"></span> <span id="busuanzi_value_page_pv"></span></span></span><span class="post-meta-divider">-</span><a href="#comment"><span class="post-meta-item-icon" title="评论数"><span class="icon iconify" data-icon="ri:chat-3-line"></span> <span class="waline-comment-count" id="/posts/245b3756/"></span></span></a><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="--text-color:#ff944d" itemprop="url" rel="index"><span itemprop="text">编程语言</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/Python3/" style="--text-color:#ffc266"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">Python3</span></a><a class="tag-item" href="/tags/%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" style="--text-color:#cc33ff"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">基础语法</span></a><a class="tag-item" href="/tags/%E7%BD%91%E9%A1%B5%E7%88%AC%E8%99%AB/" style="--text-color:#ff4d4d"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">网页爬虫</span></a></span></div><div class="post-author"><span class="author-name">山暮云秋</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><hr>
<h3 id="爬虫简单入门"><a href="#爬虫简单入门" class="headerlink" title="爬虫简单入门"></a><strong>爬虫简单入门</strong></h3><hr>
<h4 id="爬虫合法性-君子协议"><a href="#爬虫合法性-君子协议" class="headerlink" title="爬虫合法性-君子协议"></a><strong>爬虫合法性-君子协议</strong></h4><ul>
<li>关于爬虫的合法性，有<strong>君子协议</strong><br>在网站<strong>网址</strong>后加上<code>/robots.txt</code>查看君子协议</li>
</ul>
<h4 id="准备注意事项"><a href="#准备注意事项" class="headerlink" title="准备注意事项"></a><strong>准备注意事项</strong></h4><ul>
<li>做爬虫前尽量不要使用任何<strong>网络代理</strong>，否则容易出现莫名的问题</li>
</ul>
<span id="more"></span>

<h4 id="手刃一个小爬虫-request-模块实现"><a href="#手刃一个小爬虫-request-模块实现" class="headerlink" title="手刃一个小爬虫(request 模块实现)"></a><strong>手刃一个小爬虫(request 模块实现)</strong></h4><ul>
<li><p><strong>简单试做</strong>：将百度搜索源码爬取：</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment">#百度</span>
<span class="token comment">#需求：用程序模拟浏览器，输入一个网址，从该网址中获取到资源或者内容</span>
<span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> urlopen      <span class="token comment">#从包中导入模块</span>

url<span class="token operator">=</span><span class="token string">"http://www.baidu.com"</span>          <span class="token comment">#准备网址</span>
resp <span class="token operator">=</span> urlopen<span class="token punctuation">(</span>url<span class="token punctuation">)</span>            <span class="token comment">#用urlopen模拟浏览器打开网址，将返回的响应存入resp</span>

<span class="token triple-quoted-string string">"""
先print(resp.read())查看返回的内容
从中找到编码格式,一般为charset后位置
再进行解码

print(resp.read().decode("utf-8"))         #resp.read()从响应中读取内容,并用decode解码
"""</span>

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"D:\desktop\代码\python测试\Mywebsite.html"</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">"w"</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> web<span class="token punctuation">:</span>            <span class="token comment">#打开名为"Mywebsite.html"的文件,模式为w写入，as语句将其简称为web,设置encoding打开编码</span>
    web<span class="token punctuation">.</span>write<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token comment">#resp.read()从响应中读取内容,并用decode解码,将其写入到上述文件</span></code></pre></li>
</ul>
<hr>
<h3 id="Web-请求、HTTP-协议、抓包"><a href="#Web-请求、HTTP-协议、抓包" class="headerlink" title="Web 请求、HTTP 协议、抓包"></a><strong>Web 请求、HTTP 协议、抓包</strong></h3><hr>
<h4 id="Web-请求过程解析"><a href="#Web-请求过程解析" class="headerlink" title="Web 请求过程解析"></a><strong>Web 请求过程解析</strong></h4><ul>
<li>1.<strong>服务器渲染</strong>：在服务器直接把<strong>数据</strong>和 <strong>html</strong> 整合在一起，<strong>统一返回</strong>给浏览器。<br>举例：输入<strong><a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></strong>，浏览器向百度服务器发送请求，百度返回 html 页面源代码；在百度里搜索关键词，百度在服务器将关键词有关数据写入 html 页面源代码中，一并返回给浏览器</li>
<li>2.<strong>客户端渲染</strong>：<strong>第一次请求</strong>只要一个 <strong>html 骨架</strong>，<strong>第二次请求</strong>拿到<strong>数据</strong>，进行<strong>数据展示</strong>。在页面<strong>源代码</strong>中，<strong>看不到数据</strong>。<br>举例：例如豆瓣电影排行榜的分类筛选网页，浏览器先向服务器请求，服务器返回 html 骨架(不包含数据)，浏览器第二次请求，服务器返回数据，浏览器将 html 骨架与数据渲染结合，呈现页面。在源代码处搜索呈现的数据，无法找到。</li>
<li>熟练使用<strong>浏览器抓包工具</strong>：<br>Chrome 浏览器右键检查或者 F12，上方大类选择 Network；<br>刷新页面，此时所有返回的请求都在此处显示。点击文件可以打开源代码，通常第一个文件为网页骨架；<br>Headers 中 Request URL 写有 url 地址，Preview 可以查看预览效果。在这些文件中通过预览找到和页面内容匹配的数据，回到 Headers 即可找到数据 url</li>
<li>想要得到<strong>数据</strong>，<strong>无需骨架</strong>，对于爬虫而言，目的为得到数据，骨架无影响</li>
</ul>
<h4 id="HTTP-协议"><a href="#HTTP-协议" class="headerlink" title="HTTP 协议"></a><strong>HTTP 协议</strong></h4><ul>
<li><p><strong>HTTP 协议基本概念</strong></p>
<ul>
<li><strong>协议</strong>：两台<strong>计算机之间</strong>为了能流畅的进行沟通而设置的一个<strong>君子协定</strong>，常见的协议有 <code>TCP/IP</code>，<code>SOAP</code> 协议，<code>HTTP</code> 协议，<code>SMTP</code> 协议等</li>
<li><strong>HTTP 协议</strong>：Hyper Text Transfer Protocol（<strong>超文本传输协议</strong>）的缩写，是用于从<strong>万维网</strong>（WWW:World Wide Web）服务器传输超文本到本地浏览器的传输协议。直白点儿，浏览器和服务器之间的数据交互遵守的就是 HTTP 协议</li>
<li>HTTP 协议把一条消息分为<strong>三大块内容</strong>，无论是请求还是响应都是三块内容<ul>
<li><strong>请求</strong>：<blockquote>
<p>1、<strong>请求行</strong> → 请求方式(get&#x2F;post)，请求 url 地址，协议<br>2、<strong>请求头</strong> → 放一些服务器要使用的附加信息<br>3、<strong>请求体</strong> → 一般放一些请求参数</p>
</blockquote>
</li>
<li><strong>响应</strong>：<blockquote>
<p>1、<strong>状态行</strong> → 协议，状态码<br>2、<strong>响应头</strong> → 放一些客户端要使用的附加信息<br>3、<strong>响应体</strong> → 服务器返回的真正客户端要用的内容(HTML,json 等)</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>抓包工具及获得的重要信息</strong>：</p>
<ul>
<li>Network-Headers-General：一般信息<blockquote>
<p><strong>Request URL</strong>：URL 地址<br><strong>Request Method</strong>：请求方式<br><strong>Status Code</strong>：状态码</p>
</blockquote>
</li>
<li>Network-Headers-<strong>Response Headers</strong>：<strong>响应头</strong><blockquote>
<p><strong>cookie</strong>：本地字符串数据信息(用户登录信息，反爬的 token)<br><strong>其他</strong>：各种神奇的莫名其妙的字符串(这个需要经验，一般都是 token 字样，防止各种攻击和反爬)</p>
</blockquote>
</li>
<li>Network-Headers-<strong>Request Headers</strong>：<strong>请求头</strong><blockquote>
<p><strong>User-Agent</strong>：请求载体的身份标识(用啥发送的请求，如浏览器信息)<br><strong>Referer</strong>：防盗链(这次请求是从哪个页面来的，反爬需要)<br><strong>cookie</strong>：本地字符串数据信息(用户登录信息，反爬的 token)</p>
</blockquote>
</li>
</ul>
</li>
<li><p>附：<strong>请求方式</strong>：</p>
<ul>
<li>Get：显示提交(常用于搜索，通常只读)</li>
<li>Post：隐式提交(常用于对数据增删改，通常可写入)</li>
</ul>
</li>
</ul>
<hr>
<h3 id="requests-模块入门"><a href="#requests-模块入门" class="headerlink" title="requests 模块入门"></a><strong>requests 模块入门</strong></h3><hr>
<h4 id="模块安装"><a href="#模块安装" class="headerlink" title="模块安装"></a><strong>模块安装</strong></h4><ul>
<li><p><code>requests</code> 模块为第三方支持库，需要<strong>手动安装</strong></p>
<pre class="language-bash" data-language="bash"><code class="language-bash">pip <span class="token function">install</span> requests</code></pre></li>
</ul>
<h4 id="Requests-入门-1"><a href="#Requests-入门-1" class="headerlink" title="Requests 入门-1"></a><strong>Requests 入门-1</strong></h4><ul>
<li><p><strong>GET 请求</strong>：将搜狗搜索内容爬取，并学习简单的反爬</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests

url <span class="token operator">=</span> <span class="token string">"https://www.sogou.com/web?query=周杰伦"</span>          <span class="token comment">#保存网址字符串给变量，中文可能转码错误，手动打上去</span>
<span class="token comment">#第10行处被拦截，可以将更多请求头信息补入，定义一个字典headers，将User-Agent写入字典，User-Agent通过抓包网页骨架中的Request Headers(请求头)找到，注意直接复制后Mozilla前会多一个空格，记得删除</span>
<span class="token builtin">dict</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span><span class="token string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36"</span><span class="token punctuation">&#125;</span>

<span class="token comment">#用get请求方式请求url，所有地址栏中的url都是get方式请求，将响应存入resp。第四行信息补充完成后，将字典写入headers参数，处理简单的反爬</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">)</span>

<span class="token comment">#print(resp)         #打印resp，返回网页状态码，返回200正常</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>text<span class="token punctuation">)</span>        <span class="token comment">#打印页面源代码，但爬虫被拦截了,前往第四行补充信息</span>

resp<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment">#关闭请求</span></code></pre>
</li>
<li><p>可以进行一些小修改，做到更改搜索对象：</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests

<span class="token comment">#手动输入搜索的内容</span>
query<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"输入你要搜索的内容："</span><span class="token punctuation">)</span>
<span class="token comment">#利用f-string，做到搜索内容更改</span>
url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"https://www.sogou.com/web?query=</span><span class="token interpolation"><span class="token punctuation">&#123;</span>query<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span>          <span class="token comment">#保存网址字符串给变量，中文可能转码错误，手动打上去</span>
<span class="token comment">#第10行处被拦截，可以将更多请求头信息补入，定义一个字典headers，将User-Agent写入字典，User-Agent通过抓包网页骨架中的Request Headers(请求头)找到，注意直接复制后Mozilla前会多一个空格，记得删除</span>
<span class="token builtin">dict</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span><span class="token string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36"</span><span class="token punctuation">&#125;</span>

<span class="token comment">#用get请求方式请求url，所有地址栏中的url都是get方式请求，将响应存入resp。第四行信息补充完成后，将字典写入headers参数，处理简单的反爬</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">)</span>

<span class="token comment">#print(resp)         #打印resp，返回网页状态码，返回200正常</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>text<span class="token punctuation">)</span>        <span class="token comment">#打印页面源代码，但爬虫被拦截了,前往第四行补充信息</span>

resp<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment">#关闭请求</span></code></pre></li>
</ul>
<h4 id="Requests-入门-2"><a href="#Requests-入门-2" class="headerlink" title="Requests 入门-2"></a><strong>Requests 入门-2</strong></h4><ul>
<li><p><strong>POST 请求</strong>：爬取百度翻译的结果</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">"""
打开百度翻译后按F12进入抓包工具，清除多余的文件，注意输入法切换为英文，输入英文单词后，翻译框下方有一个小列表
在抓包工具中通过preview预览尝试寻找列表的数据文件，发现sug文件为数据文件
打开sug文件的Headers，获取需要的信息：url地址，请求方式为POST
打开Payload，找对From Data，为POST传参数据，对于上个GET程序中利用f-string传入参数的方式就不灵了
"""</span>
<span class="token keyword">import</span> requests

url <span class="token operator">=</span> <span class="token string">"https://fanyi.baidu.com/sug"</span>         <span class="token comment">#准备url，注意url为数据的url，即sug文件Headers的url</span>

word <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入你要翻译的英文:"</span><span class="token punctuation">)</span>        <span class="token comment">#准备翻译的单词</span>
dat <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"kw"</span><span class="token punctuation">:</span>word<span class="token punctuation">&#125;</span>               <span class="token comment">#由于POST传参数据来源为From Data，所以按照From Data中的格式，将搜索数据改写入字典，此时可以通过变量更改数据</span>

resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span>data<span class="token operator">=</span>dat<span class="token punctuation">)</span>             <span class="token comment">#由于网页访问方式为POST，故使用POST访问，将dat传入data参数，即传入From Data。将响应存入resp</span>
<span class="token comment">#print(resp.text)               #输出发现文件有乱码，可以另外直接输出json文件</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token comment">#将服务器返回的内容直接处理成json()，按照python字典方式输出</span>

resp<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment">#关闭请求</span>

<span class="token comment">#总结，对于POST请求，发送的数据必须放在字典中，通过data参数进行传递</span></code></pre></li>
</ul>
<h4 id="Requests-入门-3"><a href="#Requests-入门-3" class="headerlink" title="Requests 入门-3"></a><strong>Requests 入门-3</strong></h4><ul>
<li><p><strong>浏览器渲染的二次 GET 请求网页</strong>：<br><a target="_blank" rel="noopener" href="https://movie.douban.com/typerank?type_name=%E5%89%A7%E6%83%85&type=11&interval_id=100:90&action=">豆瓣电影分类排行榜-喜剧</a></p>
</li>
<li><p>通常网站 url 里有问号”?”，问号前的是 url，问号后的是参数</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">"""
豆瓣电影分类排行榜网页通过浏览器渲染，有两次数据传递
在抓包工具中选择筛选XHR类别(常表示二次请求数据)，找到跟页面差不多的蕴含量大一些的XHR文件，就是页面的数据文件找到数据文件Headers：
查看url，通常网站url里有问号"?"，问号前的是url，问号后的是参数，查看请求方式为GET方式
在Payload中有Query String Parameters(url问号后参数)，
"""</span>
<span class="token keyword">import</span> requests

url <span class="token operator">=</span> <span class="token string">"https://movie.douban.com/j/chart/top_list"</span>        <span class="token comment">#参数过长，可以重新封装url参数，url问号后参数部分可以删除</span>

<span class="token comment">#重新封装参数。将抓包Query String Parameters的参数复制进字典，分别打双引号，加逗号</span>
param <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"24"</span><span class="token punctuation">,</span>
    <span class="token string">"interval_id"</span><span class="token punctuation">:</span> <span class="token string">"100:90"</span><span class="token punctuation">,</span>
    <span class="token string">"action"</span><span class="token punctuation">:</span><span class="token string">""</span> <span class="token punctuation">,</span>
    <span class="token string">"start"</span><span class="token punctuation">:</span> <span class="token string">"0"</span><span class="token punctuation">,</span>
    <span class="token string">"limit"</span><span class="token punctuation">:</span> <span class="token string">"20"</span>
<span class="token punctuation">&#125;</span>

header <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span><span class="token string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36"</span><span class="token punctuation">&#125;</span>        <span class="token comment">#布置user-agent</span>

resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span>params<span class="token operator">=</span>param<span class="token punctuation">,</span>headers<span class="token operator">=</span>header<span class="token punctuation">)</span>              <span class="token comment">#将param的参数传入params(截止params)。将返回的响应存入resp</span>
<span class="token comment">#print(resp.request.url)         #输出按照参数重组后的url地址</span>
<span class="token comment">#print(resp.text)                #code 0，什么都没有，说明被反爬了</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

resp<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment">#关闭请求</span>

<span class="token comment">#反爬处理</span>

<span class="token comment">#首先尝试修改user-agent</span>
<span class="token comment">#print(resp.request.headers)         #(补充)查看默认信息，user-agent</span>
<span class="token comment">#获取浏览器抓包user-agent，准备(第20行)，写入requests.get的参数</span>
<span class="token comment">#成功拿到数据，但有乱码，将24行优化为25行，获取json文件</span></code></pre>
</li>
<li><p>在豆瓣中下拉，刷新出新的电影，同时 Query String Parameters 中出现新的数据，与原数据对比发现只有 Query String Parameters 的 start 参数变化，可以借此修改代码中 start 参数实现新效果</p>
</li>
</ul>
<hr>
<h3 id="数据解析"><a href="#数据解析" class="headerlink" title="数据解析"></a><strong>数据解析</strong></h3><hr>
<h4 id="数据解析概述"><a href="#数据解析概述" class="headerlink" title="数据解析概述"></a><strong>数据解析概述</strong></h4><ul>
<li>爬取到的网站内容和数据被夹在了 <code>html</code> 内，想要提取需要的数据，这便涉及到了数据提取<br>本课程提供三种解析方式：<blockquote>
<p><strong>Re 解析</strong>(理论运行速度最快)<br><strong>Bs4 解析</strong>(代码简单，但效率较低)<br><strong>Xpath 解析</strong>(目前较流行，中规中矩)</p>
</blockquote>
</li>
<li>三种方式可以混合进行使用，完全以结果做导向，只要能拿到想要的数据，用什么方法不重要，当掌握了这些之后再考虑性能的问题</li>
</ul>
<h4 id="Re-解析-正则表达式"><a href="#Re-解析-正则表达式" class="headerlink" title="Re 解析_正则表达式"></a><strong>Re 解析_正则表达式</strong></h4><ul>
<li><p>Re 解析：Regular Expression 的简写，正则表达式，一种<strong>使用表达式</strong>的方式对<strong>字符串</strong>进行<strong>匹配</strong>的语法规则</p>
</li>
<li><p>我们抓取到的网页源代码本质上就是一个超长的字符串。，想从里面提取内容，用正则表达式再合适不过了</p>
</li>
<li><p>优点：<strong>速度快</strong>，<strong>效率高</strong>，<strong>准确性高</strong><br>缺点：新手上手难度较大</p>
</li>
<li><p>不过只要掌握了正则编写的的逻辑关系，写出一个提取页面内容的正则并不复杂</p>
</li>
<li><p>正则的语法：使用元字符进行排列组合用来匹配字符串<br>在线测试正则表达式<a target="_blank" rel="noopener" href="https://tool.oschina.net/regex/">https://tool.oschina.net/regex/</a></p>
</li>
<li><p>元字符：具有<strong>固定含义</strong>的特殊符号</p>
</li>
<li><p><strong>常用元字符</strong></p>
<table>
<thead>
<tr>
<th align="center">元字符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.</td>
<td>匹配除换行符以外的所有字符</td>
</tr>
<tr>
<td align="center">\w</td>
<td>匹配字母数字下划线</td>
</tr>
<tr>
<td align="center">\s</td>
<td>匹配任意的空白符</td>
</tr>
<tr>
<td align="center">\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td align="center">\n</td>
<td>匹配一个换行符</td>
</tr>
<tr>
<td align="center">\t</td>
<td>匹配一个制表符</td>
</tr>
<tr>
<td align="center">^</td>
<td>匹配字符串的开始</td>
</tr>
<tr>
<td align="center">$</td>
<td>匹配字符串的结尾</td>
</tr>
<tr>
<td align="center">\W</td>
<td>匹配非字母数字下划线</td>
</tr>
<tr>
<td align="center">\D</td>
<td>匹配非数字</td>
</tr>
<tr>
<td align="center">\S</td>
<td>匹配非空白符</td>
</tr>
<tr>
<td align="center">a|b</td>
<td>匹配字符 a 或字符 b</td>
</tr>
<tr>
<td align="center">()</td>
<td>匹配括号内的表达式，也表示一个组</td>
</tr>
<tr>
<td align="center">[…]</td>
<td>匹配字符组中的字符</td>
</tr>
<tr>
<td align="center">[^…]</td>
<td>匹配除了字符组中的字符的所有字符</td>
</tr>
</tbody></table>
</li>
<li><p><strong>量词</strong>：控制前面的元字符出现的次数</p>
<table>
<thead>
<tr>
<th align="center">量词</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">*</td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td align="center">+</td>
<td>重复一次或更多次</td>
</tr>
<tr>
<td align="center">?</td>
<td>重复零次或一次</td>
</tr>
<tr>
<td align="center">{n}</td>
<td>重复 n 次</td>
</tr>
<tr>
<td align="center">{n,}</td>
<td>重复 n 次或更多次</td>
</tr>
<tr>
<td align="center">{n,m}</td>
<td>重复 n 到 m 次</td>
</tr>
</tbody></table>
</li>
<li><p><strong>贪婪匹配</strong>和<strong>惰性匹配</strong></p>
<table>
<thead>
<tr>
<th align="center">符号</th>
<th align="center">类型</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.*</td>
<td align="center">贪婪匹配</td>
</tr>
<tr>
<td align="center">.*?</td>
<td align="center">惰性匹配</td>
</tr>
</tbody></table>
<ul>
<li>这两个着重说一下，写爬虫<strong>用的最多</strong>的就是<strong>惰性匹配</strong></li>
<li><code>*？</code>表示尽可能少的让<code>*</code>匹配东西</li>
</ul>
</li>
</ul>
<h4 id="Bs4-解析-HTML-语法"><a href="#Bs4-解析-HTML-语法" class="headerlink" title="Bs4 解析_HTML 语法"></a><strong>Bs4 解析_HTML 语法</strong></h4><ul>
<li><p>Bs4 解析：Beautiful Soup4 的简写，简单易用的 <strong>HTML 解析器</strong>，需要掌握一些 HTML 语法</p>
</li>
<li><p>HTML(Hyper Text Markup Language)超文本标记语言，是编写网页<strong>最基本</strong>、<strong>最核心</strong>的语言，其语法就是用<strong>不同的标签</strong>，对网页上的内容进行<strong>标记</strong>，从而使网页显示不同的效果，简单举例：</p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>I Love You<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p><strong>常用标签</strong>：</p>
<table>
<thead>
<tr>
<th align="center">标签</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">h1</td>
<td align="center">一级标题</td>
</tr>
<tr>
<td align="center">h2</td>
<td align="center">二级标题</td>
</tr>
<tr>
<td align="center">p</td>
<td align="center">段落</td>
</tr>
<tr>
<td align="center">font</td>
<td align="center">字体(被废弃了，但能用)</td>
</tr>
<tr>
<td align="center">body</td>
<td align="center">主体</td>
</tr>
</tbody></table>
</li>
<li><p><strong>属性</strong>：标签内后跟的<strong>控制标签行为</strong>的<strong>属性</strong>，其后所写的为<strong>属性值</strong>，简单举例：<br>(借此实现标题文字<strong>右对齐</strong>，其中，<code>align</code>为属性，<code>right</code>为属性值)</p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>I Love You<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>由此，HTML<strong>基本语法格式</strong>为：</p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>标签</span> <span class="token attr-name">属性</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>值<span class="token punctuation">"</span></span> <span class="token attr-name">属性</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>值<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>被标记的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>标签</span><span class="token punctuation">></span></span></code></pre></li>
</ul>
<h4 id="Xpath-解析-XML-概念"><a href="#Xpath-解析-XML-概念" class="headerlink" title="Xpath 解析_XML 概念"></a><strong>Xpath 解析_XML 概念</strong></h4><ul>
<li><p>Xpath 解析：XML 解析器，用来<strong>提取</strong>XML 文档中的<strong>节点</strong>，Xpath 是在 XML 文档中<strong>搜索</strong>的一门语言。HTML 是 XML 的一个<strong>子集</strong></p>
</li>
<li><p><strong>基础概念</strong>：</p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>book</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>野花遍地香<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>price</span><span class="token punctuation">></span></span>1.23<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>price</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>author</span><span class="token punctuation">></span></span>'
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nick</span><span class="token punctuation">></span></span>周大强<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nick</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nick</span><span class="token punctuation">></span></span>周芷若<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nick</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>author</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>book</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><p>在上述 html 中：</p>
<blockquote>
<p>1、<code>book</code>,<code>id</code>,<code>name</code>,<code>price</code>等都被称为<strong>节点</strong><br>2、<code>id</code>,<code>name</code>,<code>price</code>,<code>author</code>被称为<code>book</code>的<strong>子节点</strong>，<code>book</code>被称为他们的<strong>父节点</strong><br>3、<code>id</code>,<code>name</code>,<code>price</code>,<code>author</code>被称为<strong>同胞节点</strong></p>
</blockquote>
</li>
</ul>
<hr>
<h3 id="python-实现-Re-解析"><a href="#python-实现-Re-解析" class="headerlink" title="python 实现 Re 解析"></a><strong>python 实现 Re 解析</strong></h3><hr>
<h4 id="Python-的-re-模块使用"><a href="#Python-的-re-模块使用" class="headerlink" title="Python 的 re 模块使用"></a><strong>Python 的 re 模块使用</strong></h4><ul>
<li><p>在 python 中使用正则表达式，可以使用<code>re</code>模块，<code>re</code>模块记住几个常用功能就足够我们日常使用了：</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> re           <span class="token comment">#引入re模块</span>

<span class="token comment">#findall：匹配字符串中所有的符合正则的内容</span>
<span class="token builtin">list</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">"\d+"</span><span class="token punctuation">,</span><span class="token string">"我的电话号是10086,我朋友的电话是10010"</span><span class="token punctuation">)</span>           <span class="token comment">#findall的结果是一个列表</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">,</span><span class="token string">"\n"</span><span class="token punctuation">)</span>

<span class="token comment">#列表效率低下，面对大量数据难以应对，按如下处理</span>
<span class="token comment">#finditer：匹配字符串中所有的内容[返回的是迭代器],从迭代器中遍历拿到内容需要.group()函数</span>
it <span class="token operator">=</span> re<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span><span class="token string">"\d+"</span><span class="token punctuation">,</span><span class="token string">"我的电话号是10086,我朋友的电话是10010"</span><span class="token punctuation">)</span>
<span class="token comment">#print(it)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> it<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#search返回的结果是match对象，那数据需要.group()，此外search全文检索，检索到一个就直接返回</span>
s <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">"\d+"</span><span class="token punctuation">,</span><span class="token string">"我的电话号是10086,我朋友的电话是10010"</span><span class="token punctuation">)</span>
<span class="token comment">#print(s)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"\n"</span><span class="token punctuation">)</span>

<span class="token comment">#match从头开始匹配，可以认为默认在正则前加了^符号，如下方10086前加一个非数字，则匹配为空</span>
a <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span><span class="token string">"\d+"</span><span class="token punctuation">,</span><span class="token string">"10086,我朋友的电话是10010"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"\n"</span><span class="token punctuation">)</span>

<span class="token comment">#compile预加载正则表达式，能够提高一定的运行效率</span>
obj <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">"\d+"</span><span class="token punctuation">)</span>
<span class="token comment">#此时obj即预加载\d+的正则，下次使用可以obj.函数，如下：</span>
ret <span class="token operator">=</span> obj<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span><span class="token string">"我的电话号是10086,我朋友的电话是10010"</span><span class="token punctuation">)</span>
<span class="token comment">#print(ret)</span>
<span class="token keyword">for</span> it <span class="token keyword">in</span> ret<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#用正则表示全部文本信息</span>
s<span class="token operator">=</span><span class="token triple-quoted-string string">"""
&lt;div class='jay'>&lt;span id='1'>雷军&lt;/span>&lt;/div>
&lt;div class='jj'>&lt;span id='2'>李彦宏&lt;/span>&lt;/div>
&lt;div class='jolin'>&lt;span id='3'>张小龙&lt;/span>&lt;/div>
&lt;div class='sylar'>&lt;span id='4'>马云&lt;/span>&lt;/div>
&lt;div class='tory'>&lt;span id='5'>马化腾&lt;/span>&lt;/div>
"""</span>
obj1 <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">"&lt;div class='.*?'>&lt;span id='\d+'>.*?&lt;/span>&lt;/div>"</span><span class="token punctuation">,</span>re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>            <span class="token comment">#re.S作用：让点.能匹配换行符</span>
<span class="token comment">#&lt;div class='部分都一样，后面不一样部分.*?代替，匹配后jay双引号后部分一样，一直到id=后单引号后不同，</span>
<span class="token comment">#用\d或\d+或者.*?代替，后同理，略</span>
result <span class="token operator">=</span> obj1<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token keyword">for</span> it <span class="token keyword">in</span> result<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#从全部文本信息中提取想要的信息(在上述代码中修改)</span>
<span class="token comment">#在要提取的文本.*?等正则符号处，用小括号包住，小括号前写?P&lt;组名> ，最后在遍历的组括号(60行)写入这个组名</span>
obj1 <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">"&lt;div class='.*?'>&lt;span id='\d+'>(?P&lt;gualudeng>.*?)&lt;/span>&lt;/div>"</span><span class="token punctuation">,</span>re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>            <span class="token comment">#re.S作用：让点.能匹配换行符</span>
<span class="token comment">#&lt;div class='部分都一样，后面不一样部分.*?代替，匹配后jay双引号后部分一样，一直到id=后单引号后不同，</span>
<span class="token comment">#用\d或\d+或者.*?代替，后同理，略</span>
result <span class="token operator">=</span> obj1<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token keyword">for</span> it <span class="token keyword">in</span> result<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">"gualudeng"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></li>
</ul>
<h4 id="手刃豆瓣-top250"><a href="#手刃豆瓣-top250" class="headerlink" title="手刃豆瓣 top250"></a><strong>手刃豆瓣 top250</strong></h4><p><a target="_blank" rel="noopener" href="https://movie.douban.com/top250">豆瓣 top250</a></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment">#数据在页面源代码中</span>
<span class="token comment">#思路：拿到页面源代码，通过re正则提取我们想要的有效信息</span>
<span class="token keyword">from</span> email <span class="token keyword">import</span> header
<span class="token keyword">import</span> requests<span class="token punctuation">,</span>re<span class="token punctuation">,</span>csv

url <span class="token operator">=</span> <span class="token string">"https://movie.douban.com/top250"</span>
ua <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span><span class="token string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36"</span><span class="token punctuation">&#125;</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span>ua<span class="token punctuation">)</span>             <span class="token comment">#简单的提取源代码和反反爬</span>
<span class="token comment">#print(resp.text)            #检查页面源码</span>
page_content <span class="token operator">=</span> resp<span class="token punctuation">.</span>text            <span class="token comment">#保存源代码至变量</span>

<span class="token comment">#解析数据</span>
<span class="token comment">#正则表达式定位，建议找需要数据的上几层标签做定位</span>
<span class="token comment">#&lt;li>为上层标签，换行时的空白可能是换行可能是空格，使用.*?表示，继续匹配到下一行，后面多行都用.*?匹配，直接找到需要的title，在需要部分单独列组()，补充后面的截止部分(此处截止至&lt;/span>处)，后略</span>
obj <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">'&lt;li>.*?&lt;div class="item">.*?&lt;span class="title">(?P&lt;title>.*?)&lt;/span>.*?&lt;p class="">.*?&lt;br>(?P&lt;year>.*?)&amp;nbsp.*?&lt;span class="rating_num" property="v:average">(?P&lt;score>.*?)&lt;/span>'</span><span class="token punctuation">,</span>re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>               <span class="token comment">#编写正则方法</span>

<span class="token comment">#使用finditer进行正则筛选</span>
result <span class="token operator">=</span> obj<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>page_content<span class="token punctuation">)</span>
<span class="token comment">#遍历result，得到数据</span>
<span class="token keyword">for</span> it <span class="token keyword">in</span> result<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n电影名："</span><span class="token punctuation">,</span>it<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"\n年份："</span><span class="token punctuation">,</span>it<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">"year"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"\n评分："</span><span class="token punctuation">,</span>it<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">"score"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">#group中的名字均为正则中的组名， .strip()为去除空白(空格)</span>

<span class="token comment">#将数据存入文件，建议存储为csv格式。引入csv模块，.csv文件默认以逗号进行数据分割</span>
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"data.csv"</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">"w"</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>          <span class="token comment">#打开文件data.csv，没有文件自动创建，模式为r写入，打开格式为utf-8</span>
csvwriter <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>f<span class="token punctuation">)</span>               <span class="token comment">#创建csvwriter，写入数据时写入f文件，注意写入数据格式应为字典</span>
result <span class="token operator">=</span> obj<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>page_content<span class="token punctuation">)</span>     <span class="token comment">#同18行</span>
<span class="token keyword">for</span> it <span class="token keyword">in</span> result<span class="token punctuation">:</span>
    dic<span class="token operator">=</span> it<span class="token punctuation">.</span>groupdict<span class="token punctuation">(</span><span class="token punctuation">)</span>                 <span class="token comment">#创建字典，将上述20-21行数据整理进字典</span>
    dic<span class="token punctuation">[</span><span class="token string">"year"</span><span class="token punctuation">]</span> <span class="token operator">=</span> dic<span class="token punctuation">[</span><span class="token string">"year"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>           <span class="token comment">#单独处理需要去掉空格的year组</span>
    csvwriter<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span>dic<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token comment">#writerow为写入一行函数，括号()内为写入数据，写入的为字典的数据.values()</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>                               <span class="token comment">#关闭文件</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"over!"</span><span class="token punctuation">)</span>

<span class="token comment">#目前完成了top25的整理，而翻页数据只需要修改url后的参数即可，比如第二页url为https://movie.douban.com/top250?start=25&amp;filter=</span>
<span class="token comment">#由此得第一页参数start=0，第三页start=50，所以输出top250排行榜，可以此为方向研究</span></code></pre>

<p>参考源代码：<br><img src="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%831.png" loading="lazy"></p>
<h4 id="屠戮盗版天堂电影信息"><a href="#屠戮盗版天堂电影信息" class="headerlink" title="屠戮盗版天堂电影信息"></a><strong>屠戮盗版天堂电影信息</strong></h4><p><a target="_blank" rel="noopener" href="https://dytt89.com/">盗版天堂</a></p>
<ul>
<li><p>补充 html 中 a 标签超链接知识</p>
<blockquote>
<p>1、确认数据在页面源码中，定位到 2022 必看热片<br>2、从 2022 必看热片中提取到子页面链接地址<br>3、请求子页面的链接地址，拿到想要的下载地址</p>
</blockquote>
</li>
<li><p>实际操作</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token punctuation">,</span>re

main_url <span class="token operator">=</span> <span class="token string">"https://dytt89.com/"</span>            <span class="token comment">#主界面url</span>
child_url_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment">#原老版网站存在https加密，requests模块也有安全验证，所以会报错，可以使用verify=False关闭安全验证来解决，运行时最上部的警告意为“请求没有进行安全验证”。新版网站已取消</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>main_url <span class="token punctuation">,</span> verify<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>          <span class="token comment">#verify=False关闭安全验证</span>
resp<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">"gb2312"</span>            <span class="token comment">#指定字符集编码</span>
<span class="token comment">#print(resp.text)            #输出乱码，需要重新编码，网页编码格式通常在源码charset处会写明，找到后补充上一行代码，更改默认编码</span>
<span class="token comment">#定位提取ul里面的li</span>
obj1 <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">'2022必看热片.*?&lt;ul>(?P&lt;ul>.*?)&lt;/ul>'</span><span class="token punctuation">,</span>re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>           <span class="token comment">#提取需要的部分</span>
obj2 <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">"&lt;a href='(?P&lt;href>.*?)'"</span><span class="token punctuation">,</span>re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>                       <span class="token comment">#提取a标签中的url链接</span>

<span class="token comment">#开始筛选提取</span>
result1 <span class="token operator">=</span> obj1<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>text<span class="token punctuation">)</span>             <span class="token comment">#第一次提取板块源码部分</span>
<span class="token keyword">for</span> it <span class="token keyword">in</span> result1<span class="token punctuation">:</span>
    ul <span class="token operator">=</span> it<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">"ul"</span><span class="token punctuation">)</span>                         <span class="token comment">#存入ul</span>
    <span class="token comment">#print(ul)              #检验输出</span>
    <span class="token comment">#html知识补充：在html中，a标签表示超链接，如：&lt;a href='url'>周杰伦&lt;/a>，网页上显示周杰伦的超链接，跳转地址为href=后的url</span>
    <span class="token comment">#提取子页面链接(href后url)</span>
    result2 <span class="token operator">=</span> obj2<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>ul<span class="token punctuation">)</span>             <span class="token comment">#第二次从板块源码部分提取url，但提取的url为参数，需要与main_url拼接</span>
    <span class="token keyword">for</span> itt <span class="token keyword">in</span> result2<span class="token punctuation">:</span>
        add <span class="token operator">=</span> itt<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">)</span>                 <span class="token comment">#存入add</span>
        <span class="token comment">#print(add)              #检验输出</span>
        child_url <span class="token operator">=</span> main_url <span class="token operator">+</span> add<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>              <span class="token comment">#拼接url，使用strip除去拼接处多余的一个/符号</span>
        <span class="token comment">#print(child_url)            #检验输出</span>
        child_url_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>child_url<span class="token punctuation">)</span>            <span class="token comment">#将网址保存进列表里(注意空列表已经提前定义)</span>

<span class="token comment">#提取子页面内容</span>
obj3 <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">'◎片　　名(?P&lt;movie>.*?)&lt;br />.*?&lt;td style="WORD-WRAP: break-word" bgcolor="#fdfddf">&lt;a href="(?P&lt;download>.*?)">'</span><span class="token punctuation">,</span>re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>
<span class="token keyword">for</span> url <span class="token keyword">in</span> child_url_list<span class="token punctuation">:</span>
    child_resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>           <span class="token comment">#操作基本同上</span>
    child_resp<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">"gb2312"</span>
    <span class="token comment">#下两行仅为测试使用</span>
    <span class="token comment">#print(child_resp.text)</span>
    <span class="token comment">#break</span>
    result3 <span class="token operator">=</span> obj3<span class="token punctuation">.</span>search<span class="token punctuation">(</span>child_resp<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>result3<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">"movie"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>result3<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">"download"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
</li>
<li><p>参考源代码：<br><img src="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%832.png" loading="lazy"></p>
</li>
</ul>
<p><img src="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%833.png" loading="lazy"></p>
<hr>
<h3 id="python-实现-Bs4-解析"><a href="#python-实现-Bs4-解析" class="headerlink" title="python 实现 Bs4 解析"></a><strong>python 实现 Bs4 解析</strong></h3><hr>
<h4 id="Python-的-bs4-模块使用"><a href="#Python-的-bs4-模块使用" class="headerlink" title="Python 的 bs4 模块使用"></a><strong>Python 的 bs4 模块使用</strong></h4><ul>
<li><p>python 的 <code>bs4</code> 模块为第三方模块，需要先安装，安装 cmd 语法如下：</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">pip <span class="token function">install</span> bs4</code></pre></li>
</ul>
<h4 id="抓取示例：北京新发地菜价-已失效，仅可参考"><a href="#抓取示例：北京新发地菜价-已失效，仅可参考" class="headerlink" title="抓取示例：北京新发地菜价(已失效，仅可参考)"></a><strong>抓取示例：北京新发地菜价</strong>(已失效，仅可参考)</h4><ul>
<li><p><strong>注</strong>：页面重构，下示例代码仅可参考，无法运行，网站改为浏览器渲染，使用 POST 请求<br><a target="_blank" rel="noopener" href="http://www.xinfadi.com.cn/priceDetail.html">北京新发地地址(已重构)</a></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># 页面源代码中能找到数据，所以直接爬取，后使用bs4提取数据即可</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> csv
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
url <span class="token operator">=</span> <span class="token string">"http://www.xinfadi.com.cn/marketanalysis/0/list/1.shtml"</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
<span class="token comment"># print(resp.text)           #测试</span>

<span class="token comment"># 准备需要写入的文件</span>
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"菜价.csv"</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">"w"</span><span class="token punctuation">)</span>
csvwriter <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>f<span class="token punctuation">)</span>

<span class="token comment"># 解析数据，把页面源代码交给beautiful soup处理，生成bs4的对象</span>
page <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">"html.parser"</span><span class="token punctuation">)</span>  <span class="token comment"># 括号第二个参数指定html解析器</span>

<span class="token comment"># 从bs4对象查找数据(find / find_all(标签 属性="值"))</span>
<span class="token comment"># 查找内容。由于class是python关键字，所以写class_代替</span>
table <span class="token operator">=</span> page<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"table"</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">"hq_table"</span><span class="token punctuation">)</span>
<span class="token comment"># print(table)           #测试</span>

<span class="token comment"># 得到的是表格，表格内每一行为tr标签，每一行内每列为td标签</span>
<span class="token comment"># 再次筛选tr，拿到所有数据行，做切片，从1行开始切，去除0行的表头</span>
trs <span class="token operator">=</span> table<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"tr"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> tr <span class="token keyword">in</span> trs<span class="token punctuation">:</span>              <span class="token comment"># 每一行的数据进行遍历</span>
    tds <span class="token operator">=</span> tr<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"td"</span><span class="token punctuation">)</span>              <span class="token comment"># 拿到每行中的所有td</span>
    name <span class="token operator">=</span> tds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text              <span class="token comment"># .text表示拿到被标签标记的内容</span>
    low <span class="token operator">=</span> tds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text
    avg <span class="token operator">=</span> tds<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text
    high <span class="token operator">=</span> tds<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text
    kind <span class="token operator">=</span> tds<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text
    <span class="token builtin">set</span> <span class="token operator">=</span> tds<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text
    date <span class="token operator">=</span> tds<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text
    <span class="token comment"># print(name, low, avg, high, kind, set, date)           #输出测试</span>
    csvwriter<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span>name<span class="token punctuation">,</span> low<span class="token punctuation">,</span> avg<span class="token punctuation">,</span> high<span class="token punctuation">,</span> kind<span class="token punctuation">,</span> <span class="token builtin">set</span><span class="token punctuation">,</span> date<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 写入文件，需要列表</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"over"</span><span class="token punctuation">)</span></code></pre>
</li>
<li><p>参考源代码：<br><img src="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%834.png" loading="lazy"></p>
</li>
</ul>
<h4 id="抓取优美图库的图片-已失效，仅可参考"><a href="#抓取优美图库的图片-已失效，仅可参考" class="headerlink" title="抓取优美图库的图片(已失效，仅可参考)"></a><strong>抓取优美图库的图片</strong>(已失效，仅可参考)</h4><p><a target="_blank" rel="noopener" href="https://umei.cc/bizhitupian/weimeibizhi">优美图库(已失效)</a></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># 1.拿到主页面的源代码，然后提取到子页面的链接地址，href</span>
<span class="token comment"># 2.通过href拿到子页面的数据内容，提取图片的下载地址，img->src</span>
<span class="token comment"># 3.下载图片</span>

<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time         <span class="token comment"># 对应37行代码</span>
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup

url <span class="token operator">=</span> <span class="token string">"https://umei.cc/bizhitupian/weimeibizhi"</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
resp<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">"utf-8"</span>          <span class="token comment"># 解码处理</span>
<span class="token comment"># print(resp.text)            #测试</span>

<span class="token comment"># 把源代码交给bs4</span>
main_page <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">"html.parser"</span><span class="token punctuation">)</span>
<span class="token comment"># 取得typelist后提取a标签</span>
alist <span class="token operator">=</span> main_page<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">"TypeList"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
<span class="token comment"># print(alist)            #测试</span>
<span class="token keyword">for</span> a <span class="token keyword">in</span> alist<span class="token punctuation">:</span>             <span class="token comment"># 循环遍历每一个a标签</span>
    <span class="token comment"># print(a.get("href"))        #测试，直接通过get就可以得到属性值</span>
    href <span class="token operator">=</span> a<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">)</span>
    <span class="token comment"># 至此任务1完成。进行任务2</span>

    <span class="token comment"># 拿到子页面源代码</span>
    child_resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>href<span class="token punctuation">)</span>
    child_resp<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">"utf-8"</span>
    child_page_text <span class="token operator">=</span> child_resp<span class="token punctuation">.</span>text
    <span class="token comment"># 从子页面中拿到图片的下载路径</span>
    child_page <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>child_page_text<span class="token punctuation">,</span> <span class="token string">"html.parser"</span><span class="token punctuation">)</span>
    p <span class="token operator">=</span> child_page<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> align<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">)</span>
    img <span class="token operator">=</span> p<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span>
    src <span class="token operator">=</span> img<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"src"</span><span class="token punctuation">)</span>

    <span class="token comment"># 下载图片</span>
    img_resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>src<span class="token punctuation">)</span>
    <span class="token comment"># img_resp.content         # content获取到的是字节，写回到文件就是图片</span>
    img_name <span class="token operator">=</span> src<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token comment"># 图片命名，对src链接以"/"切割，并取最后一部分命名</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>img_name<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>          <span class="token comment"># wb写入二进制图片</span>
        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>img_resp<span class="token punctuation">.</span>content<span class="token punctuation">)</span>       <span class="token comment"># 写入图片</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"part success!"</span><span class="token punctuation">,</span> img_name<span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>           <span class="token comment"># 防止访问过于频繁被封ip，休息1秒钟</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"all over!"</span><span class="token punctuation">)</span></code></pre>

<ul>
<li>参考源代码：<br><img src="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%835.png" loading="lazy"><br><img src="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/blog/Python3%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/%E5%8F%82%E8%80%836.png" loading="lazy"></li>
</ul>
<hr>
<h3 id="python-实现-Xpath-解析"><a href="#python-实现-Xpath-解析" class="headerlink" title="python 实现 Xpath 解析"></a><strong>python 实现 Xpath 解析</strong></h3><hr>
<h4 id="Python-的-lxml-模块使用"><a href="#Python-的-lxml-模块使用" class="headerlink" title="Python 的 lxml 模块使用"></a><strong>Python 的 lxml 模块使用</strong></h4><ul>
<li><p>python 的 <code>lxml</code> 模块为第三方模块，需要先安装，安装 cmd 语法如下：</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">pip <span class="token function">install</span> lxml</code></pre></li>
</ul>
<h4 id="python-中-xpath-解析的使用"><a href="#python-中-xpath-解析的使用" class="headerlink" title="python 中 xpath 解析的使用"></a><strong>python 中 xpath 解析的使用</strong></h4><ul>
<li><p><strong>示例程序</strong></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree

xml <span class="token operator">=</span> <span class="token triple-quoted-string string">"""......"""</span>          <span class="token comment"># 将XML文档存入变量，(此处省略，本程序无法直接运行)</span>
tree <span class="token operator">=</span> etree<span class="token punctuation">.</span>XML<span class="token punctuation">(</span>xml<span class="token punctuation">)</span>       <span class="token comment"># 生成etree的XML文档</span>
<span class="token comment"># result = tree.xpath("/book")        # xpath查找book节点，"/"表示层级关系，第一个"/"是根节点</span>
result1 <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"/book/name/text()"</span><span class="token punctuation">)</span>        <span class="token comment"># text()表示获取被标记的内容</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span>
<span class="token comment"># 双斜杠"//"表示范围内跨层级搜索(全局搜索)</span>
result2 <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"/book/author//nick/text()"</span><span class="token punctuation">)</span>
<span class="token comment"># xpath中"*"符号为通配符，表示任意，同正则表达式的"."</span>
result3 <span class="token operator">=</span> tree<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"/book/author/*/nick/text()"</span><span class="token punctuation">)</span></code></pre>
</li>
<li><p><strong>补充</strong></p>
<ul>
<li><code>etree</code>可以打开存有 html 代码的文件：<code>tree = etree.parse(存有html的文件)</code></li>
<li><code>etree.xxx</code>需要跟相对应的类型，如源码为 html 则为<code>etree.HTML()</code></li>
<li>可以在需要的路径后跟<code>[n]</code>，表示索引，提取第 n 个节点(<strong>注：从 1 开始</strong>)，如：<code>/book[1]/name/text()</code></li>
<li>可以在需要的路径后跟<code>[@属性=&quot;值&quot;]</code>，表示提取属性值为”值”的节点，如：<code>/book[@id=&quot;1&quot;]/name/text()</code>。不加属性值，表示<strong>定位到属性</strong></li>
<li>使用<strong>相对节点查找</strong>时，可以使用<code>./</code>，代替表示当前节点</li>
<li><strong>小技巧</strong>：当层级较多时，可以使用浏览器抓包工具，网页<code>检查</code>，找到对应代码，右键，copy-&gt;Xpath，就可以直接获取路径</li>
</ul>
</li>
<li><p><strong>爬取猪八戒网信息</strong><br><a target="_blank" rel="noopener" href="https://qingdao.zbj.com/search/f/?kw=saas">青岛猪八戒网-搜索写入 saas</a></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree

url <span class="token operator">=</span> <span class="token string">"https://qingdao.zbj.com/search/f/?kw=saas"</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
<span class="token comment"># print(resp.text)            #测试</span>

<span class="token comment"># 提取</span>
html <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
<span class="token comment"># 利用"检查"工具，查找一个代码块的路径，一层一层向外寻找，直到整个大页面的前一层，获取这一个窗口块的路径</span>
<span class="token comment"># xpath解析，处理[]的数量，使其对应所有窗口快，拿到每一个div</span>
divs <span class="token operator">=</span> html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"/html/body/div[6]/div/div/div[2]/div[5]/div[1]/div"</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> div <span class="token keyword">in</span> divs<span class="token punctuation">:</span>            <span class="token comment"># for遍历divs</span>
    <span class="token comment"># 使用相对路径查找</span>

    <span class="token comment"># price = div.xpath("./div/div/a[1]/div[2]/div[1]/span[1]/text()")</span>
    <span class="token comment"># 获取东西存放在列表，使用[0]获取列表第一个元素去除列表框，strip去除¥符号</span>
    price <span class="token operator">=</span> div<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"./div/div/a[1]/div[2]/div[1]/span[1]/text()"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">"¥"</span><span class="token punctuation">)</span>

    <span class="token comment"># title = div.xpath("./div/div/a[1]/div[2]/div[2]/p/text()")</span>
    <span class="token comment"># 由于saas是被搜索对象，被独立高亮没有获取到，所以将其拼接起来</span>
    title <span class="token operator">=</span> <span class="token string">"saas"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>div<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"./div/div/a[1]/div[2]/div[2]/p/text()"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    com_name <span class="token operator">=</span> div<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"./div/div/a[2]/div[1]/p/text()"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    place <span class="token operator">=</span> div<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">"./div/div/a[2]/div[1]/div/span/text()"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span> title<span class="token punctuation">,</span> com_name<span class="token punctuation">,</span> place<span class="token punctuation">)</span></code></pre></li>
</ul>
<hr>
<h3 id="requests-模块进阶"><a href="#requests-模块进阶" class="headerlink" title="requests 模块进阶"></a><strong>requests 模块进阶</strong></h3><hr>
<h4 id="requests-进阶概述"><a href="#requests-进阶概述" class="headerlink" title="requests 进阶概述"></a><strong>requests 进阶概述</strong></h4><ul>
<li>我们在之前的爬虫中其实已经使用过<code>headers</code>了，<code>header</code>为 HTTP 协议中的<strong>请求头</strong>，一般存放一些和请求内容无关的数据，有时也会存放一些<strong>安全验证信息</strong>，比如常见的<code>User-Agent</code>，<code>token</code>，<code>cookie</code>等</li>
<li>通过<code>requests</code>发送的请求，我们可以把请求头信息放在 headers 中.也可以单独进行存放，最终由 requests 自动帮我们<strong>拼接成完整的 http 请求头</strong></li>
<li>本章内容<blockquote>
<p>1、模拟浏览器登录 —&gt; 处理 cookie<br>2、防盗链处理 —&gt; 抓取梨视频<br>3、使用代理 —&gt; 防止被封 IP</p>
</blockquote>
</li>
</ul>
<h4 id="处理-cookie-模拟浏览器登录"><a href="#处理-cookie-模拟浏览器登录" class="headerlink" title="处理 cookie 模拟浏览器登录"></a><strong>处理 cookie 模拟浏览器登录</strong></h4><ul>
<li><p>浏览器登录网页时，将用户名与密码上传到服务器，服务器内部进行校验，成功后将<strong>登录信息返回写入 cookie</strong>，下次进行请求时，可以连带 cookie 一起发送给服务器</p>
</li>
<li><p>示例：爬取 17k 小说网的用户书架内容<br><a target="_blank" rel="noopener" href="https://www.17k.com/">17k 小说网</a></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># 登录，得到cookie</span>
<span class="token comment"># 带着cookie，去请求到书架的url，得到书架上的内容</span>
<span class="token comment"># 必须把上述两个操作连起来</span>
<span class="token comment"># 我们可以使用session进行请求，session你可以认为是一连串的请求，在这个过程中的cookie不会丢失</span>
<span class="token keyword">import</span> requests

<span class="token comment"># 会话，直接获取session，创建会话</span>
session <span class="token operator">=</span> requests<span class="token punctuation">.</span>session<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 1.登录</span>
<span class="token comment"># 在用户登录界面F12抓包，登录后查看login文件，为请求文件</span>
<span class="token comment"># 内部url为登录界面url，from-data中loginName和password就是服务器需要的用户名和密码</span>
url <span class="token operator">=</span> <span class="token string">"https://passport/17k.com/ck/user/login"</span>
dat <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"loginName"</span><span class="token punctuation">:</span> <span class="token string">"18614075987"</span><span class="token punctuation">,</span>
    <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string">"q6039545"</span>
<span class="token punctuation">&#125;</span>
session<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token operator">=</span>dat<span class="token punctuation">)</span>
<span class="token comment"># resp = session.post(url, data=dat)        # 验证下述信息</span>
<span class="token comment"># print(resp.text)          # 查看登录后响应信息，判断是否成功</span>
<span class="token comment"># print(resp.cookies)       # 看cookie，确认信息</span>

<span class="token comment"># 2.拿书架数据</span>
<span class="token comment"># 在书架查看源代码，没发现书名，说明是浏览器渲染，抓包找到对应的数据文件</span>
<span class="token comment"># 不能使用requests.get，因为那样就打开了一个新的请求，不知道cookie，而会话session知道</span>
resp <span class="token operator">=</span> session<span class="token punctuation">.</span>get<span class="token punctuation">(</span>
    <span class="token string">"https://user.17k.com/ck/author/shelf?page=1&amp;appKey=2406394919"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>text<span class="token punctuation">)</span>

<span class="token comment"># 另一种使用requests.get的方法，在已登录书架界面，抓包到数据，将cookie手动补充到url请求头</span>
resp_ <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://user.17k.com/ck/author/shelf?page=1&amp;appKey=2406394919"</span><span class="token punctuation">,</span> headers<span class="token operator">=</span><span class="token punctuation">&#123;</span>
    <span class="token string">"cookie"</span><span class="token punctuation">:</span> <span class="token string">"所需要的cookie，数据文件处抓包获得"</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>resp_<span class="token punctuation">.</span>text<span class="token punctuation">)</span></code></pre></li>
</ul>
<h4 id="防盗链的处理"><a href="#防盗链的处理" class="headerlink" title="防盗链的处理"></a><strong>防盗链的处理</strong></h4><ul>
<li><p>示例：爬取梨视频的视频<br><a target="_blank" rel="noopener" href="https://www.pearvideo.com/video_1759202">梨视频中的一段视频</a></p>
<ul>
<li>梨视频的视频在<strong>抓包工具</strong>中视频存放在 <code>video</code> 标签下，而<strong>源代码</strong>中<strong>看不到</strong> video 标签，大致可以推断，视频 video 标签是后期通过 JS 脚本生成出来的</li>
<li>所以对于视频，首先抓包检查工具大致确定视频地址，<strong>再在源代码中确认一次</strong></li>
<li>梨视频，抓包工具，刷新页面，<code>XHR</code> 中能找到有关视频链接的数据文件，从中获取到抓取到的视频地址</li>
<li>抓到的视频不能直接播放，将其与原视频 url 对比，发现其中<strong>有一段不同</strong>。不同的部分，不能打开的链接将原先的 <code>cont-xxxx</code> 替换为了抓包得到数据中的<strong>系统时间</strong>，在视频的主页面，链接最后的一串数字就是<code>cont-</code>后需要的数字</li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># 1.拿到contId做拼接</span>
<span class="token comment"># 2.拿到videoStatus数据文件返回的json ---> srcURL被处理的视频链接</span>
<span class="token comment"># 3.将srcURL内的内容进行修整</span>
<span class="token comment"># 4.拿到视频的真实地址，进行下载</span>

<span class="token keyword">import</span> requests
<span class="token comment"># 主页面的url地址，需要最后的一串数字contId作拼接</span>
url <span class="token operator">=</span> <span class="token string">"https://pearvideo.com/video_1759202"</span>
contId <span class="token operator">=</span> url<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"_"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>          <span class="token comment"># 通过下划线进行切割，取[1]段，即可取得1759202</span>
<span class="token comment"># 数据文件的url地址</span>
<span class="token comment"># videoStatus = "https://pearvideo.com/videoStatus.jsp?contId=1759202&amp;mrd=0.20093235215815763"</span>
<span class="token comment"># 通过f-string进行contId的替换</span>
videoStatus <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"https://pearvideo.com/videoStatus.jsp?contId=</span><span class="token interpolation"><span class="token punctuation">&#123;</span>contId<span class="token punctuation">&#125;</span></span><span class="token string">&amp;mrd=0.20093235215815763"</span></span>

<span class="token comment"># 准备反反爬用的UA与防盗链</span>
header <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token string">"User-Agent"</span><span class="token punctuation">:</span> <span class="token string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36"</span><span class="token punctuation">,</span>
    <span class="token comment"># 防盗链Referer：请求到videoStatus时，其会进行溯源，可以类比为白名单，仅可从此链接请求才可以通过</span>
    <span class="token comment"># 此处防盗链地址就是上面的url变量存的地址，即也可将此处字符串直接写为url变量</span>
    <span class="token string">"Referer"</span><span class="token punctuation">:</span> <span class="token string">"https://pearvideo.com/video_1759202"</span>
<span class="token punctuation">&#125;</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>videoStatus<span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">)</span>
<span class="token comment"># 首次输出显示"该文章已下线"，表示被反爬了，添加UA后二次输出仍不能解决，视频被防盗链Referer保护，将防盗链补充到请求中</span>
<span class="token comment"># print(resp.text)            # 测试输出</span>

<span class="token comment"># 需要获取到视频地址srcURL，使用.json获取json文件内容，按层级取需要的内容</span>
dic <span class="token operator">=</span> resp<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
srcURL <span class="token operator">=</span> dic<span class="token punctuation">[</span><span class="token string">"videoInfo"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"videos"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"srcUrl"</span><span class="token punctuation">]</span>
systemTime <span class="token operator">=</span> dic<span class="token punctuation">[</span><span class="token string">"systemTime"</span><span class="token punctuation">]</span>
<span class="token comment"># 进行替换</span>
srcURL <span class="token operator">=</span> srcURL<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>systemTime<span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f"cont-</span><span class="token interpolation"><span class="token punctuation">&#123;</span>contId<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token comment"># print(srcURL)             # 测试</span>

<span class="token comment"># 下载视频</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"a.mp4"</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>srcURL<span class="token punctuation">)</span><span class="token punctuation">.</span>content<span class="token punctuation">)</span>           <span class="token comment"># content直接获取文件内容</span></code></pre></li>
</ul>
<h4 id="代理"><a href="#代理" class="headerlink" title="代理"></a><strong>代理</strong></h4><ul>
<li><p>原理：通过<strong>第三方</strong>的机器去发送请求(需要自己提前寻找代理 IP)<br><a target="_blank" rel="noopener" href="https://www.zdaye.com/dayProxy.html">站大爷 IP</a><br><a target="_blank" rel="noopener" href="http://www.66ip.cn/">66 免费代理</a></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests

url <span class="token operator">=</span> <span class="token string">"https://www.baidu.com"</span>

<span class="token comment"># 本次所取代理IP：60.217.136.129</span>
<span class="token comment"># 代理端口：8060</span>

<span class="token comment"># 准备代理</span>
proxies <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token comment"># 协议是http还是https取决于访问的网站协议，字典value为"协议名://代理IP:端口"</span>
    <span class="token string">"https"</span><span class="token punctuation">:</span> <span class="token string">"https://60.217.136.129:8060"</span>
<span class="token punctuation">&#125;</span>

resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> proxies<span class="token operator">=</span>proxies<span class="token punctuation">)</span>
resp<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">"utf-8"</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>text<span class="token punctuation">)</span></code></pre></li>
</ul>
<h4 id="抓包工具的补充使用"><a href="#抓包工具的补充使用" class="headerlink" title="抓包工具的补充使用"></a><strong>抓包工具的补充使用</strong></h4><ul>
<li>浏览器抓包工具中<code>Initiator</code>中<code>request call back</code>项记录了网站调用的 JS 栈，从下往上按时间顺序排列。点击可以进入 JS 源码，点击窗口左下方的<strong>大括号</strong>可以对源码进行缩进排版，找到需要的<strong>发送行</strong>设置断点，利用<strong>断点调试</strong>找到需要的信息，可以借此得到一些网站的<strong>加密过程</strong>或其他源码(涉及逆向 JS，较为复杂)</li>
</ul>
<hr>
<h3 id="线程与进程"><a href="#线程与进程" class="headerlink" title="线程与进程"></a><strong>线程与进程</strong></h3><hr>
<h4 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a><strong>基础概念</strong></h4><ul>
<li><strong>进程</strong>：操作系统运行程序时，会为其开辟一块<strong>内存空间</strong>，专门用于存放与此程序相关的数据，这块<strong>内存区域</strong>称为<strong>xxx 进程</strong></li>
<li><strong>线程</strong>：在<strong>xxx 进程</strong>中存在多个<strong>线程</strong>，共同完成工作</li>
<li><strong>进程</strong>是<strong>资源单位</strong>，<strong>线程</strong>是<strong>执行单位</strong>。每一个进程<strong>至少要有一个线程</strong>，且程序执行时会有<strong>一个主线程</strong>，即可认为启动一个程序默认会有一个主线程</li>
</ul>
<h4 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a><strong>多线程</strong></h4><ul>
<li><p>举例<strong>单线程</strong>：<br>(一个简单的线性单线程程序，主函数中，<code>func</code>函数执行完毕后才会执行主函数的<code>for</code>循环)</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"func"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    func<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span></code></pre>
</li>
<li><p><strong>多线程</strong>示例 1，直接利用<code>Thread</code>类：</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> threading <span class="token keyword">import</span> Thread            <span class="token comment"># 导入线程的类</span>

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"func"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    t <span class="token operator">=</span> Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>func<span class="token punctuation">)</span>             <span class="token comment"># 创建一个线程类的对象，并且target=告诉程序这个线程执行的话会执行谁，为线程安排任务</span>
    t<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment"># 设置多线程状态为可以执行状态，具体的执行时间由CPU决定</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span></code></pre>
</li>
<li><p><strong>多线程</strong>示例 2，利用面向对象的特性，自己写一个继承<code>Thread</code>的<code>class</code>类：</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> threading <span class="token keyword">import</span> Thread

<span class="token keyword">class</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span>Thread<span class="token punctuation">)</span><span class="token punctuation">:</span>         <span class="token comment"># 继承Thread</span>
    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>          <span class="token comment"># 固定的        # 当线程被设置可以执行之后，被执行的就是run()</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"子线程"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    t <span class="token operator">=</span> MyThread<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># t.run()         #千万不能使用t.run，否则就是类方法的调用！--->单线程</span>
    t<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"主线程"</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span></code></pre>
</li>
<li><p>多线程的<strong>函数传参</strong></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> threading <span class="token keyword">import</span> Thread

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> i<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># 在Thread函数中，添加args进行传参，且args接收的数据类型必须是元组</span>
    <span class="token comment"># 注意，元组内只有一个元素的时候需要加逗号</span>
    t1 <span class="token operator">=</span> Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>func<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"周杰伦"</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    t1<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    t2 <span class="token operator">=</span> Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>func<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"王力宏"</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    t2<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></li>
</ul>
<h4 id="多进程"><a href="#多进程" class="headerlink" title="多进程"></a><strong>多进程</strong></h4><ul>
<li><p>相对于多线程而言，多进程会<strong>开辟新的空间</strong>，<strong>增加占用</strong>，所以平常使用机会不大，多半可以由多线程代替</p>
</li>
<li><p><strong>多进程</strong>示例(基本与多线程类似)：</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"子进程"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    p <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>func<span class="token punctuation">)</span>
    p<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"主进程"</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span></code></pre></li>
</ul>
<h4 id="线程池与进程池"><a href="#线程池与进程池" class="headerlink" title="线程池与进程池"></a><strong>线程池与进程池</strong></h4><ul>
<li><p><strong>线程池</strong>：<strong>一次性</strong>开辟一些线程，用户直接给线程池<strong>提交任务</strong>，可以节省开辟线程的资源，线程任务的<strong>调度</strong>交给<strong>线程池来完成</strong></p>
</li>
<li><p><strong>进程池</strong>：同上线程池类似</p>
</li>
<li><p><strong>线程池示例</strong></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> concurrent<span class="token punctuation">.</span>futures <span class="token keyword">import</span> ThreadPoolExecutor<span class="token punctuation">,</span> ProcessPoolExecutor
<span class="token comment"># 注：ThreadPoolExecutor为线程池，ProcessPoolExecutor为进程池，按需引入</span>

<span class="token keyword">def</span> <span class="token function">fn</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> i<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># 创建线程池</span>
    <span class="token comment"># 创建一个由50个线程组成的线程池，其中ThreadPoolExecutor的参数控制线程数量</span>
    <span class="token keyword">with</span> ThreadPoolExecutor<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t<span class="token punctuation">:</span>
        <span class="token comment"># 表示100个任务的for循环</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 给线程提交任务</span>
            t<span class="token punctuation">.</span>submit<span class="token punctuation">(</span>fn<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f"线程</span><span class="token interpolation"><span class="token punctuation">&#123;</span>i<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token comment"># 等待线程池的内容全部完成才会执行(守护)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"over"</span><span class="token punctuation">)</span></code></pre></li>
</ul>
<hr>
<h3 id="协程与异步"><a href="#协程与异步" class="headerlink" title="协程与异步"></a><strong>协程与异步</strong></h3><hr>
<h4 id="协程概念"><a href="#协程概念" class="headerlink" title="协程概念"></a><strong>协程概念</strong></h4><ul>
<li><p><strong>样例理解</strong>：</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>           <span class="token comment"># 让当前线程处于阻塞状态，CPU不为此程序工作</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"456"</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    func<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 执行input()时，程序也是处于阻塞状态</span>
<span class="token comment"># requests.get()请求等待过程中，程序也是处于阻塞状态</span>
<span class="token comment"># 一般情况下，当程序处于IO操作时，线程都会处于阻塞状态</span></code></pre>
</li>
<li><p><strong>协程</strong>：当程序遇见<code>IO操作</code>的时候，可以选择性的<strong>切换到其他任务</strong>上<br><strong>在微观上</strong>是一个任务一个任务的<strong>进行切换</strong>，<strong>在宏观上</strong>我们能看见的是<strong>多个任务一起共同执行</strong><br>这种操作称为<strong>多任务异步操作</strong><br>上方所讲的一切，都是在<strong>单线程的条件下</strong></p>
</li>
</ul>
<h4 id="多任务异步协程"><a href="#多任务异步协程" class="headerlink" title="多任务异步协程"></a><strong>多任务异步协程</strong></h4><ul>
<li><p><strong>语法理解</strong></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> asyncio
<span class="token comment"># 用async定义异步协程函数</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫塞丽娜"</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment">#此时的函数是异步协程函数，此时函数执行得到的是一个协程对象</span>
    g <span class="token operator">=</span> func<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># print(g)            # 测试</span>
    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>func<span class="token punctuation">)</span>           <span class="token comment"># 协程程序运行需要asyncio模块的支持</span></code></pre>
</li>
<li><p><strong>基本语法 1</strong></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> asyncio
<span class="token keyword">import</span> time

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫潘金莲"</span><span class="token punctuation">)</span>
    <span class="token comment"># time.sleep(3)           # 当程序出现同步操作时，异步就中断了</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>            <span class="token comment"># 异步模块的sleep，使用await挂起，切到其他任务</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫潘金莲"</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫王建国"</span><span class="token punctuation">)</span>
    <span class="token comment"># time.sleep(2)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫王建国"</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫李雪琴"</span><span class="token punctuation">)</span>
    <span class="token comment"># time.sleep(4)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫李雪琴"</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    f1 <span class="token operator">=</span> func1<span class="token punctuation">(</span><span class="token punctuation">)</span>
    f2 <span class="token operator">=</span> func2<span class="token punctuation">(</span><span class="token punctuation">)</span>
    f3 <span class="token operator">=</span> func3<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 将需要执行的任务放入列表</span>
    tasks_ <span class="token operator">=</span> <span class="token punctuation">[</span>
        f1<span class="token punctuation">,</span> f2<span class="token punctuation">,</span> f3
    <span class="token punctuation">]</span>
    t1 <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment"># 记录执行前的时间</span>
    <span class="token comment"># 一次性启动多个任务(协程)</span>
    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>asyncio<span class="token punctuation">.</span>wait<span class="token punctuation">(</span>tasks_<span class="token punctuation">)</span><span class="token punctuation">)</span>
    t2 <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment"># 记录执行后的时间</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>t2<span class="token operator">-</span>t1<span class="token punctuation">)</span>            <span class="token comment"># 输出运行时间</span></code></pre>
</li>
<li><p><strong>基本语法 2(推荐)</strong></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> asyncio

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫潘金莲"</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫潘金莲"</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫王建国"</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫王建国"</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫李雪琴"</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫李雪琴"</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 第一种写法</span>
    <span class="token comment"># f1 = func1()</span>
    <span class="token comment"># await f1            #await通常放在协程对象前面</span>
    <span class="token comment"># 后略</span>
    <span class="token comment">#第二种写法(推荐)</span>
    tasks_<span class="token operator">=</span><span class="token punctuation">[</span>
        func1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>func2<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>func3<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>wait<span class="token punctuation">(</span>tasks_<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
</li>
<li><p>注意：<strong>Python3.8</strong>后会报<strong>警告</strong>，由于版本迭代，<strong>Python3.11</strong>后将不再支持<code>await asyncio.wait()</code>中直接传入协程对象，而是需要将协程对象通过<code>asyncio.create_task()</code>转换为<strong>asyncio.Task</strong>对象，才能使用，如下：</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> asyncio

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫潘金莲"</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫潘金莲"</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫王建国"</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫王建国"</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫李雪琴"</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你好，我叫李雪琴"</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    tasks_<span class="token operator">=</span><span class="token punctuation">[</span>
        asyncio<span class="token punctuation">.</span>create_task<span class="token punctuation">(</span>func1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        asyncio<span class="token punctuation">.</span>create_task<span class="token punctuation">(</span>func2<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        asyncio<span class="token punctuation">.</span>create_task<span class="token punctuation">(</span>func3<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>wait<span class="token punctuation">(</span>tasks_<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></li>
</ul>
<hr>
<h3 id="异步-http-请求"><a href="#异步-http-请求" class="headerlink" title="异步 http 请求"></a><strong>异步 http 请求</strong></h3><hr>
<h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a><strong>概述</strong></h4><ul>
<li>发送请求时，原先的<code>requests.get()</code>是一个同步操作，会将异步程序转为同步，需要换成 <strong>异步请求操作</strong></li>
</ul>
<h4 id="Python-的-aiohttp-模块使用"><a href="#Python-的-aiohttp-模块使用" class="headerlink" title="Python 的 aiohttp 模块使用"></a><strong>Python 的 aiohttp 模块使用</strong></h4><ul>
<li><p>python 的 <code>aiohttp</code> 模块为第三方模块，需要先安装，安装 cmd 语法如下：</p>
<pre class="language-bash" data-language="bash"><code class="language-bash">pip <span class="token function">install</span> aiohttp</code></pre></li>
</ul>
<h4 id="基本语法-下载网站图片"><a href="#基本语法-下载网站图片" class="headerlink" title="基本语法-下载网站图片"></a><strong>基本语法-下载网站图片</strong></h4><ul>
<li><p><strong>示例程序</strong></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> asyncio
<span class="token keyword">import</span> aiohttp

urls <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">"photo_url1"</span><span class="token punctuation">,</span>
    <span class="token string">"photo_url2"</span><span class="token punctuation">,</span>
    <span class="token string">"photo_url3"</span>
<span class="token punctuation">]</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">aiodownload</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 发送请求，得到图片内容，保存到文件</span>
    <span class="token comment"># 得到异步会话</span>
    <span class="token comment"># s = aiohttp.ClientSession()         # 等价于原来的requests模块，例如可使用s.get</span>
    <span class="token comment"># 使用with上下文管理器，可以省去手动session.close()</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> aiohttp<span class="token punctuation">.</span>ClientSession<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> session<span class="token punctuation">:</span>
        <span class="token comment"># 发送请求，得到resp</span>
        <span class="token keyword">async</span> <span class="token keyword">with</span> session<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">as</span> resp<span class="token punctuation">:</span>
            <span class="token comment"># 此处为读取图片，所以使用content</span>
            <span class="token comment"># resp.content.read()         # 等价于原先的resp.content，此处需要多.read()读取</span>
            <span class="token comment"># resp.text()               # 读取文本，需要多一个()</span>
            <span class="token comment"># resp.json()               # 同原先相同</span>
            <span class="token comment"># 写入文件</span>
            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"文件名(可以按url地址切割存入变量)"</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
                <span class="token comment"># IO操作，需要await挂起</span>
                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token keyword">await</span> resp<span class="token punctuation">.</span>content<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    tasks_ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> url <span class="token keyword">in</span> urls<span class="token punctuation">:</span>
        tasks_<span class="token punctuation">.</span>append<span class="token punctuation">(</span>aiodownload<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>wait<span class="token punctuation">(</span>tasks_<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></li>
</ul>
<h4 id="示例：百度小说《西游记》"><a href="#示例：百度小说《西游记》" class="headerlink" title="示例：百度小说《西游记》"></a><strong>示例：百度小说《西游记》</strong></h4><ul>
<li><p><a target="_blank" rel="noopener" href="https://dushu.baidu.com/pc/detail?gid=4306063500">百度小说《西游记》</a>，注意抓包时展开全部章节</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># 所有章节内容的url(章节名称，cid)</span>
<span class="token comment"># https://dushu.baidu.com/api/pc/getCatalog?data=&#123;"book_id":"4306063500"&#125;</span>
<span class="token comment"># 章节内部的具体内容</span>
<span class="token comment"># https://dushu.baidu.com/api/pc/getChapterContent?data=&#123;"book_id":"4306063500","cid":"4306063500|1569782244","need_bookinfo":1&#125;</span>

<span class="token keyword">import</span> requests
<span class="token keyword">import</span> asyncio
<span class="token keyword">import</span> aiohttp
<span class="token keyword">import</span> aiofiles
<span class="token keyword">import</span> json

<span class="token comment"># 1.同步操作，访问getCatalog，拿到所有章节的cid和名称</span>
<span class="token comment"># 2.异步操作：访问getChapterContent，拿到小说内容并下载</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">aiodownload</span><span class="token punctuation">(</span>cid<span class="token punctuation">,</span> book_id<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 准备参数，作为json代码</span>
    data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        <span class="token string">"book_id"</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">&#123;</span>book_id<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
        <span class="token string">"cid"</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">&#123;</span>book_id<span class="token punctuation">&#125;</span></span><span class="token string">|</span><span class="token interpolation"><span class="token punctuation">&#123;</span>cid<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
        <span class="token string">"need_bookinfo"</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment"># 转换json为字符串</span>
    data <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token comment"># 拼接url</span>
    url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"https://dushu.baidu.com/api/pc/getChapterContent?data=</span><span class="token interpolation"><span class="token punctuation">&#123;</span>data<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span>
    <span class="token comment"># 准备异步请求</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> aiohttp<span class="token punctuation">.</span>ClientSession<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> session<span class="token punctuation">:</span>
        <span class="token keyword">async</span> <span class="token keyword">with</span> session<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">as</span> resp<span class="token punctuation">:</span>
            dic <span class="token operator">=</span> <span class="token keyword">await</span> resp<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment"># dic["data"]["novel"]["content"]           #小说的内容</span>
            <span class="token comment"># 利用aiofiles异步写入文件</span>
            <span class="token keyword">async</span> <span class="token keyword">with</span> aiofiles<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"D:\Desktop\代码程序\python测试\新建文件夹\</span><span class="token interpolation"><span class="token punctuation">&#123;</span>title<span class="token punctuation">&#125;</span></span><span class="token string">.txt"</span></span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">"w"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
                <span class="token keyword">await</span> f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>dic<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"novel"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"content"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">getCatalog</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token comment"># print(resp.text)          # 测试</span>
    dic <span class="token operator">=</span> resp<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 准备异步的空列表</span>
    tasks_ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> item <span class="token keyword">in</span> dic<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"novel"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"items"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>              <span class="token comment"># item对应每个章节的名称和cid</span>
        title <span class="token operator">=</span> item<span class="token punctuation">[</span><span class="token string">"title"</span><span class="token punctuation">]</span>
        cid <span class="token operator">=</span> item<span class="token punctuation">[</span><span class="token string">"cid"</span><span class="token punctuation">]</span>
        <span class="token comment"># print(cid,title)          # 测试</span>
        <span class="token comment"># 每一个cid就是一个url，准备异步任务</span>
        tasks_<span class="token punctuation">.</span>append<span class="token punctuation">(</span>aiodownload<span class="token punctuation">(</span>cid<span class="token punctuation">,</span> book_id<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>wait<span class="token punctuation">(</span>tasks_<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token comment"># 将book_id提取为单独的变量备用</span>
    book_id <span class="token operator">=</span> <span class="token string">"4306063500"</span>
    url <span class="token operator">=</span> <span class="token string">'https://dushu.baidu.com/api/pc/getCatalog?data=&#123;"book_id":"'</span> <span class="token operator">+</span> book_id <span class="token operator">+</span> <span class="token string">'"&#125;'</span>
    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>getCatalog<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></li>
</ul>
<hr>
<h3 id="selenium-模块"><a href="#selenium-模块" class="headerlink" title="selenium 模块"></a><strong>selenium 模块</strong></h3><hr>
<h4 id="selenium-引入概念"><a href="#selenium-引入概念" class="headerlink" title="selenium 引入概念"></a><strong>selenium 引入概念</strong></h4><ul>
<li><p>某些网页的<strong>数据内容</strong>被<strong>加密</strong>了，而浏览器显示的为<strong>正常数据</strong>，让程序<strong>连接到浏览器</strong>，让浏览器来完成各种复杂的操作，我们<strong>只接收最终的结果</strong></p>
</li>
<li><p><code>selenium</code>模块：<strong>自动化测试工具</strong>。它可以打开浏览器，然后<strong>像人一样</strong>去操作浏览器。程序员可以从<code>selenium</code>中直接<strong>提取</strong>网页上的各种信息</p>
</li>
<li><p><code>selenium</code>的<strong>配置安装</strong>：</p>
<blockquote>
<p><strong>安装 selenium 模块</strong>：<code>pip install selenium</code><br><strong>下载浏览器驱动</strong>：<a target="_blank" rel="noopener" href="https://www.selenium.dev/documentation/webdriver/getting_started/install_drivers/">selenium 驱动下载地址</a>，下载<strong>对应浏览器</strong>的<strong>对应版本</strong>驱动<br><strong>驱动的存放</strong>：将解压后的<strong>浏览器驱动</strong>放在<strong>Python 解释器</strong>所在的文件夹下，windows 下即为<strong>python 安装目录</strong>文件夹中</p>
</blockquote>
</li>
<li><p><strong>测试</strong>(注意模块 Chrome 或其他浏览器要<strong>首字母大写</strong>):</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> Chrome

<span class="token comment"># 1.创建浏览器对象</span>
web <span class="token operator">=</span> Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 2.打开一个网址</span>
web<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://www.baidu.com"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>web<span class="token punctuation">.</span>title<span class="token punctuation">)</span></code></pre></li>
</ul>
<h4 id="selenium-基础操作"><a href="#selenium-基础操作" class="headerlink" title="selenium 基础操作"></a><strong>selenium 基础操作</strong></h4><ul>
<li><p><strong>示例：抓取拉钩网站</strong><br><a target="_blank" rel="noopener" href="http://lagou.com/">拉钩网址</a></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> Chrome
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keys

<span class="token keyword">import</span> time
web <span class="token operator">=</span> Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
web<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://lagou.com"</span><span class="token punctuation">)</span>
<span class="token comment"># 点击页面中的某个元素，通过在页面检查元素，复制xpath</span>
el <span class="token operator">=</span> web<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="changeCityBox"]/p[1]/a'</span><span class="token punctuation">)</span>          <span class="token comment"># 找到元素</span>
el<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token comment"># 点击元素</span>

<span class="token comment"># 也可以直接写为web.find_element_by_xpath('//*[@id="changeCityBox"]/p[1]/a').click()</span>
<span class="token comment"># 可以通过by后不同的查找方式查找，如div标签这种页面中存在很多的元素，可以通过find_elements全部获取</span>
<span class="token comment"># web.find_elements_by_tag_name("div")</span>

<span class="token comment"># 防止刷新速度慢，暂停1秒</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 找到输入框，输入python ---> 输入回车/点击搜索</span>
<span class="token comment"># 此处实现输入回车，找到输入框，使用.send_keys()输入内容</span>
<span class="token comment"># 键盘回车通过第二行的包中的Keys模块实现，点进Keys可以查看所有能实现的键盘按键</span>
web<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="search_input"]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"python"</span><span class="token punctuation">,</span> Keys<span class="token punctuation">.</span>ENTER<span class="token punctuation">)</span>

time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 查找存放数据的位置，进行数据提取(注：此处代码由于网页重构已失效，无法运行！)</span>
<span class="token comment"># 找到存放数据的所有li，注意获取多个最后li的[]索引要删除</span>
li_list <span class="token operator">=</span> web<span class="token punctuation">.</span>find_elements_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="s_position_list"]/ul/li'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> li <span class="token keyword">in</span> li_list<span class="token punctuation">:</span>
    job_name <span class="token operator">=</span> li<span class="token punctuation">.</span>find_element_by_tag_name<span class="token punctuation">(</span><span class="token string">"h3"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
    job_price <span class="token operator">=</span> li<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"./div/div/div[2]/div/span"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
    company_name <span class="token operator">=</span> li<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"./div/div[2]/div/a"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
    <span class="token keyword">print</span><span class="token punctuation">(</span>job_name<span class="token punctuation">,</span> company_name<span class="token punctuation">,</span> job_price<span class="token punctuation">)</span></code></pre></li>
</ul>
<h4 id="窗口之间的切换"><a href="#窗口之间的切换" class="headerlink" title="窗口之间的切换"></a><strong>窗口之间的切换</strong></h4><ul>
<li><p><strong>示例 1：抓取拉钩网站工作详情</strong></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> Chrome
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>keys <span class="token keyword">import</span> Keys
<span class="token keyword">import</span> time

web <span class="token operator">=</span> Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
web<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://lagou.com"</span><span class="token punctuation">)</span>
web<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="changeCityBox"]/p[1]/a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>
web<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="search_input"]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">"python"</span><span class="token punctuation">,</span> Keys<span class="token punctuation">.</span>ENTER<span class="token punctuation">)</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>

<span class="token comment"># 点击岗位查看详情，会跳转到新页面</span>
<span class="token comment"># 点击岗位</span>
web<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="jobList"]/div[1]/div[1]/div[1]/div[1]/div[1]/a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 如何进入到新窗口进行提取</span>
<span class="token comment"># 注意，即使浏览器已经切换新窗口，在selenium的眼中，新出现的窗口默认是不切换的(未被选中)</span>
<span class="token comment"># 切换窗口，使用window_handles[-1]选中最后一个窗口选项卡</span>
web<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>window<span class="token punctuation">(</span>web<span class="token punctuation">.</span>window_handles<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 在新窗口中提取内容</span>
job_detail <span class="token operator">=</span> web<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="job_detail"]/dd[2]/div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
<span class="token keyword">print</span><span class="token punctuation">(</span>job_detail<span class="token punctuation">)</span>
<span class="token comment"># 关闭窗口</span>
web<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 重新调整窗口焦点</span>
web<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>window<span class="token punctuation">(</span>web<span class="token punctuation">.</span>window_handles<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre>
</li>
<li><p><strong>示例 2：处理 iframe 标签，示例站点 91 看剧</strong><br><a target="_blank" rel="noopener" href="https://www.91kanju.com/vod-play/541-2-1.html">91 看剧视频(网址有效，视频失效)</a></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> Chrome

web <span class="token operator">=</span> Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 页面中遇到iframe怎么处理</span>
web<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.91kanju.com/vod-play/541-2-1.html"</span><span class="token punctuation">)</span>
<span class="token comment"># 要处理iframe，必须先得到iframe，然后切换视角到iframe，才能拿数据</span>
<span class="token comment"># 定位到iframe</span>
iframe <span class="token operator">=</span> web<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="player_iframe"]'</span><span class="token punctuation">)</span>
<span class="token comment"># 切入窗口视角到iframe</span>
web<span class="token punctuation">.</span>switch_to<span class="token punctuation">.</span>frame<span class="token punctuation">(</span>iframe<span class="token punctuation">)</span>
<span class="token comment"># 切出窗口视角到默认窗口视角</span>
<span class="token comment"># web.switch_to.default_content()</span>
tx <span class="token operator">=</span> web<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="main"]/h3[1]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
<span class="token keyword">print</span><span class="token punctuation">(</span>tx<span class="token punctuation">)</span></code></pre></li>
</ul>
<h4 id="无头浏览器、下拉菜单-select-的处理、拿到-elements-页面源码"><a href="#无头浏览器、下拉菜单-select-的处理、拿到-elements-页面源码" class="headerlink" title="无头浏览器、下拉菜单 select 的处理、拿到 elements 页面源码"></a><strong>无头浏览器、下拉菜单 select 的处理、拿到 elements 页面源码</strong></h4><ul>
<li><p><strong>无头浏览器</strong>：对于爬虫而言，浏览器的显示界面可以隐藏</p>
</li>
<li><p><strong>示例：艺恩电影排行</strong><br><a target="_blank" rel="noopener" href="https://endata.com.cn/BoxOffice/BO/Year/index.html">艺恩电影排行(网址已失效)</a></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> Chrome
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>chrome<span class="token punctuation">.</span>options <span class="token keyword">import</span> Options
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>select <span class="token keyword">import</span> Select
<span class="token keyword">import</span> time

<span class="token comment"># 无头浏览器</span>
<span class="token comment"># 准备好配置参数</span>
opt <span class="token operator">=</span> Options<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 添加参数</span>
opt<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">"--headless"</span><span class="token punctuation">)</span>          <span class="token comment"># 无头</span>
opt<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">"--disable-gpu"</span><span class="token punctuation">)</span>           <span class="token comment"># 禁用gpu</span>
<span class="token comment"># =================================================================</span>

<span class="token comment"># 在Chrome()中参加无头参数</span>
web <span class="token operator">=</span> Chrome<span class="token punctuation">(</span>options<span class="token operator">=</span>opt<span class="token punctuation">)</span>
web<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://endata.com.cn/BoxOffice/BO/Year/index.html"</span><span class="token punctuation">)</span>

<span class="token comment"># 网址中有select下拉列表元素，如何处理</span>
<span class="token comment"># 定位到下拉列表</span>
sel_el <span class="token operator">=</span> web<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="OptionDate"]'</span><span class="token punctuation">)</span>
<span class="token comment"># 对元素进行包装，包装成下拉菜单，需要引入第二行的包</span>
sel <span class="token operator">=</span> Select<span class="token punctuation">(</span>sel_el<span class="token punctuation">)</span>
<span class="token comment"># 让浏览器进行调整选项</span>
<span class="token comment"># sel.options下拉框的列表的长度作为for循环次数，i就是每一个下拉框选项的索引位置</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>sel<span class="token punctuation">.</span>options<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># select_by-xxx处，by_index为按照索引进行切换，by_value为按照select选项value进行切换，by_visible_text为按照所见文本进行切换</span>
    sel<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span>i<span class="token punctuation">)</span>          <span class="token comment"># 按照索引i进行切换</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>           <span class="token comment"># 等待切换</span>
    <span class="token comment"># 提取数据，此处省略</span>

<span class="token comment"># =================================================================</span>
<span class="token comment"># 如何拿到页面源代码Elements数据(经过数据加载以及JS执行之后的结果的html内容)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>web<span class="token punctuation">.</span>page_source<span class="token punctuation">)</span></code></pre></li>
</ul>
<h4 id="处理验证码"><a href="#处理验证码" class="headerlink" title="处理验证码"></a><strong>处理验证码</strong></h4><ul>
<li>处理简单的文字验证码可以通过写图像识别完成，但操作困难，难度大，且局限性强，因此使用市面上现成的验证码处理平台实现，如超级鹰</li>
</ul>
<hr>
<h3 id="页底评论"><a href="#页底评论" class="headerlink" title="页底评论"></a><strong>页底评论</strong></h3><hr>
</div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><span class="icon iconify" data-icon="ri:hand-coin-line"></span></span><div id="reward-comment">手头阔绰?点这点这!money得斯!</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/social/wechatpay.png"><img loading="lazy" src="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/social/wechatpay.png" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><span class="icon iconify" data-icon="ri:wechat-pay-line"></span></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/social/alipay.png"><img loading="lazy" src="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/social/alipay.png" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><span class="icon iconify" data-icon="ri:alipay-line"></span></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/social/QQpay.png"><img loading="lazy" src="https://jsd.vxo.im/gh/ShanMuYunQiu/Image/social/QQpay.png" alt="QQ 支付" title="QQ 支付"></a><div><span style="color:#12B7F5"><span class="icon iconify" data-icon="ri:qq-line"></span></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>山暮云秋</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://blog.muyun.space/posts/245b3756/" title="Python3爬虫基础">https://blog.muyun.space/posts/245b3756/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> 许可协议。</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/posts/7e973705/" rel="prev" title="C语言基础教程"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">C语言基础教程</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/posts/54ce768c/" rel="next" title="VScode基本环境配置"><span class="post-nav-text">VScode基本环境配置</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>若您想及时得到回复提醒，也可以去B站私信我哦</span><br><span>如果较为紧急，建议添加微信或QQ，并注明来意</span><br><span>评论系统可能加载较慢，请耐心等待或刷新重试</span><br></div><div id="waline"></div><link rel="stylesheet" href="https://jsd.vxo.im/npm/@waline/client@v2/dist/waline.css"><script>window.CONFIG.waline.config.path = "/posts/245b3756/"</script><div class="js-Pjax"><script src="/js/comments/waline.js" type="module" defer></script></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2022 – 2025 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> 山暮云秋</span></div><div class="live-time"><span>本博客已历经风霜坚持了</span><span id="display_live_time"></span><span class="moe-text">(￣▽￣)／</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2022-04-15T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} 天 ${passHour} 小时 ${passMinute} 分 ${passSecond} 秒`;
}
blog_live_time();
</script></div><div id="busuanzi"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div class="footer-custom-text"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="18px" height="18px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve" style="vertical-align: middle;margin-right: 4px"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z" data-darkreader-inline-fill="" style="--darkreader-inline-fill:#4cc3ff;"></path></svg>Hexo</a> v6.3.0</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="yun-logo" stroke="#000" width="18px" height="18px" viewBox="40 40 320 320" stroke-width="16" style="vertical-align: middle; margin-right: 4px; --darkreader-inline-stroke:#fffffe;" data-darkreader-inline-stroke=""> <defs> <line id="eye" x1="0" y1="-35" x2="0" y2="35" stroke-linecap="round"> <animateTransform attributeName="transform" additive="sum" attributeType="XML" type="scale" from="1 1" to="1 0" dur="0.15s" repeatCount="2"></animateTransform> </line> </defs> <polygon stroke-linejoin="round" fill="none" points="50,250 50,150 100,150 100,100 300,100 300,150 350,150 350,250 300,250 300,300 100,300 100,250 50,250"></polygon> <use xlink:href="#eye" transform="translate(150,200)"></use> <use xlink:href="#eye" transform="translate(250,200)"></use></svg><span>Yun</span></a> v1.10.11</span><span class="footer-separator">|</span>Deploys by<a href="https://vercel.com" target="_blank" rel="noopener noreferrer"><svg width="66.33" height="15" viewBox="0 0 283 64" id="vercel-logo" fill="#000" xmlns="http://www.w3.org/2000/svg" style="vertical-align: middle; --darkreader-inline-fill:#060606;" data-darkreader-inline-fill=""><path d="M141.04 16c-11.04 0-19 7.2-19 18s8.96 18 20 18c6.67 0 12.55-2.64 16.19-7.09l-7.65-4.42c-2.02 2.21-5.09 3.5-8.54 3.5-4.79 0-8.86-2.5-10.37-6.5h28.02c.22-1.12.35-2.28.35-3.5 0-10.79-7.96-17.99-19-17.99zm-9.46 14.5c1.25-3.99 4.67-6.5 9.45-6.5 4.79 0 8.21 2.51 9.45 6.5h-18.9zM248.72 16c-11.04 0-19 7.2-19 18s8.96 18 20 18c6.67 0 12.55-2.64 16.19-7.09l-7.65-4.42c-2.02 2.21-5.09 3.5-8.54 3.5-4.79 0-8.86-2.5-10.37-6.5h28.02c.22-1.12.35-2.28.35-3.5 0-10.79-7.96-17.99-19-17.99zm-9.45 14.5c1.25-3.99 4.67-6.5 9.45-6.5 4.79 0 8.21 2.51 9.45 6.5h-18.9zM200.24 34c0 6 3.92 10 10 10 4.12 0 7.21-1.87 8.8-4.92l7.68 4.43c-3.18 5.3-9.14 8.49-16.48 8.49-11.05 0-19-7.2-19-18s7.96-18 19-18c7.34 0 13.29 3.19 16.48 8.49l-7.68 4.43c-1.59-3.05-4.68-4.92-8.8-4.92-6.07 0-10 4-10 10zm82.48-29v46h-9V5h9zM36.95 0L73.9 64H0L36.95 0zm92.38 5l-27.71 48L73.91 5H84.3l17.32 30 17.32-30h10.39zm58.91 12v9.69c-1-.29-2.06-.49-3.2-.49-5.81 0-10 4-10 10V51h-9V17h9v9.2c0-5.08 5.91-9.2 13.2-9.2z"><br> <!-- 萌ICP备案 --><font style="font-size:14px"><img style="width:24px;height:24px;margin-bottom:-8px" src="https://moe.blog/content/uploadfile/Links/icp.gov.moe.png" /><a href="https://icp.gov.moe/?keyword=20245835" target="_blank"><span style="color:#ff3333">萌</span><span style="color:#ff8533">I</span><span style="color:#1f991f">C</span><span style="color:#3385ff">P</span><span style="color:#8533ff">备</span> </a><a href="https://icp.gov.moe/?keyword=20245835" target="_blank"> <span style="color:#ff3333">20</span><span style="color:#ff8533">24</span><span style="color:#1f991f">58</span><span style="color:#3385ff">35</span><span style="color:#ff3333">号</span></a></font></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="	#ff8533" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://jsd.vxo.im/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div class="search-result-container"></div></div><script>function initMourn() {
  const date = new Date();
  const today = (date.getMonth() + 1) + "-" + date.getDate()
  const mourn_days = ["4-4","9-18"]
  if (mourn_days.includes(today)) {
    document.documentElement.style.filter = "grayscale(1)";
  }
}
initMourn();</script><div id="aplayer"></div><script>function initAplayer() {
  const ap = new APlayer({
    container: document.getElementById('aplayer'),
    fixed: true,
    autoplay: true,
    theme: "	#ff8533",
    loop: "all",
    order: "random",
    preload: "auto",
    audio: [{"name":"夏天，再见","artist":"暮色 / 诗岸","url":"https://music.163.com/song/media/outer/url?id=1861068892.mp3","cover":"http://p2.music.126.net/65hyLjIBv5qFhSpQ3KlOiA==/109951166175266739.jpg","lrc":"/lrc/夏天，再见.lrc"},{"name":"流霰(星尘Infinity Version)","artist":"旅行的蜗牛 / 星尘","url":"https://music.163.com/song/media/outer/url?id=1925101032.mp3","cover":"http://p1.music.126.net/O8s988XrtOxiN30TWyAyiQ==/109951167951585729.jpg","lrc":"/lrc/流霰(星尘Infinity Version).lrc"},{"name":"巫山云(星尘Infinity Version)","artist":"旅行的蜗牛 / 星尘","url":"https://music.163.com/song/media/outer/url?id=1921741824.mp3","cover":"http://p2.music.126.net/pjre_OsOEZOglF57MKVArw==/109951167068514633.jpg","lrc":"/lrc/巫山云(星尘Infinity Version).lrc"},{"name":"月巷","artist":"星葵77 / 乐正绫","url":"https://music.163.com/song/media/outer/url?id=2123816639.mp3","cover":"http://p2.music.126.net/gGlxMNxHKkCwJeD--vKvNQ==/109951169310962799.jpg","lrc":"/lrc/月巷.lrc"},{"name":"东京不太热","artist":"Z新豪 / 洛天依Official","url":"/lrc/东京不太热.mp3","cover":"http://p1.music.126.net/8Sk3EpucLC9e8KheMe_GcQ==/109951165315088091.jpg","lrc":"/lrc/东京不太热.lrc"},{"name":"藏蓝-（绫）","artist":"残杨如血","url":"/lrc/藏蓝-（绫）.mp3","cover":"http://p2.music.126.net/qPt2fkD4DSYIgE2JfkoXdA==/109951166568711712.jpg","lrc":"/lrc/藏蓝-（绫）.lrc"},{"name":"碎梦（short ver.）","artist":"COP / 乐正绫","url":"https://music.163.com/song/media/outer/url?id=515964379.mp3","cover":"http://p1.music.126.net/MBUOR-eADofn53ksY3takw==/109951163052186407.jpg","lrc":"/lrc/碎梦（short ver.）.lrc"},{"name":"旧时约","artist":"WOVOP / 乐正绫","url":"https://music.163.com/song/media/outer/url?id=2037885601.mp3","cover":"http://p1.music.126.net/X5-IU5fcCQbJFWZ67rfpEg==/109951168535887842.jpg","lrc":"/lrc/旧时约.lrc"},{"name":"听雨（AI）","artist":"WOVOP / 洛天依","url":"https://music.163.com/song/media/outer/url?id=1962600810.mp3","cover":"http://p2.music.126.net/Atb91zHjpmraNZE7BHdtMA==/109951167646461688.jpg","lrc":"/lrc/听雨（AI）.lrc"},{"name":"淋完这场雨就忘记你吧","artist":"WOVOP / 洛天依","url":"https://music.163.com/song/media/outer/url?id=2136164855.mp3","cover":"http://p1.music.126.net/MTd6fmN9E_p4suM_VS3CqA==/109951169415944765.jpg","lrc":"/lrc/淋完这场雨就忘记你吧.lrc"},{"name":"啥啊","artist":"星葵77 / 洛天依Official","url":"https://music.163.com/song/media/outer/url?id=1963526955.mp3","cover":"http://p1.music.126.net/-Mkgn-OfUd2Q-to55fvsHA==/109951167663201782.jpg","lrc":"/lrc/啥啊.lrc"},{"name":"夏霞 (Acoustic ver.)","artist":"あたらよ","url":"/lrc/夏霞 (Acoustic ver.).mp3","cover":"http://p1.music.126.net/HymDERNi6HQa0PHVxhvstQ==/109951167607871650.jpg","lrc":"/lrc/夏霞 (Acoustic ver.).lrc"},{"name":"DROP","artist":"美波","url":"/lrc/DROP.mp3","cover":"http://p1.music.126.net/tWZUuc87BMfRDayQIYXEew==/109951166189424848.jpg","lrc":"/lrc/DROP.lrc"},{"name":"アイスクリーム","artist":"花譜","url":"/lrc/アイスクリーム.mp3","cover":"http://p2.music.126.net/M6JINT-YzbR95liqI13oBw==/109951168551085464.jpg","lrc":"/lrc/アイスクリーム.lrc"},{"name":"それを世界と言うんだね","artist":"花譜","url":"/lrc/それを世界と言うんだね.mp3","cover":"http://p2.music.126.net/vlT1L_p5ExPSydDE8HUPpQ==/109951168436884742.jpg","lrc":"/lrc/それを世界と言うんだね.lrc"},{"name":"it's 6pm but I miss u already.","artist":"bbbluelee / Furyl / Siren","url":"https://music.163.com/song/media/outer/url?id=1890756154.mp3","cover":"http://p2.music.126.net/vfArwmf4yUKmZhi-ZCwOXA==/109951166569406479.jpg","lrc":"/lrc/it's 6pm but I miss u already..lrc"},{"name":"下一个拥抱 (past times)","artist":"艾纳德 / Diorbin","url":"https://music.163.com/song/media/outer/url?id=2049786420.mp3","cover":"http://p1.music.126.net/fSCIbOxlbwHwON2cMaDbkA==/109951168633034946.jpg","lrc":"/lrc/下一个拥抱 (past times).lrc"},{"name":"鲸歌（Cover 萨满乐队）","artist":"陈亮 宋依凡","url":"https://music.163.com/song/media/outer/url?id=474667755.mp3","cover":"http://p2.music.126.net/je0ZQVB8GAKscWQOXw0B7g==/109951162814733915.jpg","lrc":"/lrc/鲸歌（Cover 萨满乐队）.lrc"},{"name":"漫步","artist":"UnicornPhantom","url":"https://music.163.com/song/media/outer/url?id=1990251011.mp3","cover":"http://p2.music.126.net/tpSYVkCGmQxbmlkJYfRrvA==/109951167975764401.jpg","lrc":"/lrc/漫步.lrc"},{"name":"独角","artist":"UnicornPhantom","url":"https://music.163.com/song/media/outer/url?id=1934213146.mp3","cover":"http://p1.music.126.net/1HOpmf61G-QHQmm5xIv9rg==/109951167230524234.jpg","lrc":"/lrc/独角.lrc"},{"name":"青空","artist":"THE ROLLING GIRLS","url":"https://music.163.com/song/media/outer/url?id=474567081.mp3","cover":"http://p1.music.126.net/_lMvCfJvymqXqI5d6R9esQ==/109951163597998554.jpg","lrc":"/lrc/青空.lrc"},{"name":"夕暮れ(カバー)","artist":"THE ROLLING GIRLS","url":"/lrc/夕暮れ(カバー).mp3","cover":"http://p1.music.126.net/3K3K5wWj3v9IjOn5TkTyPw==/109951163597992477.jpg","lrc":"/lrc/夕暮れ(カバー).lrc"},{"name":"Polaris","artist":"Asia D / JAMMERC","url":"https://music.163.com/song/media/outer/url?id=1824513851.mp3","cover":"http://p1.music.126.net/34x_GGDI47WYG-sZobR8dw==/109951165775251579.jpg","lrc":"/lrc/Polaris.lrc"},{"name":"Seasons","artist":"Rival / Cadmium / Harley Bird","url":"https://music.163.com/song/media/outer/url?id=1313014216.mp3","cover":"http://p1.music.126.net/Aeh-xCT2sl-i0tF8K5qU7w==/109951163571120456.jpg","lrc":"/lrc/Seasons.lrc"},{"name":"Miracle","artist":"Tiborg","url":"/lrc/Miracle.mp3","cover":"http://p1.music.126.net/Yr28yJDbF_Pi5Mr108Od3A==/109951164548560768.jpg","lrc":"/lrc/Miracle.lrc"},{"name":"Dirty Paws - 电影《白日梦想家》插曲","artist":"Of Monsters And Men","url":"/lrc/Dirty Paws.mp3","cover":"http://p2.music.126.net/yU_pXqN1KAjjNdKa_fXveQ==/2534374302309080.jpg","lrc":"/lrc/Dirty Paws.lrc"},{"name":"Stay Alive - 电影《白日梦想家》插曲","artist":"José González","url":"/lrc/Stay Alive.mp3","cover":"http://p2.music.126.net/yU_pXqN1KAjjNdKa_fXveQ==/2534374302309080.jpg","lrc":"/lrc/Stay Alive.lrc"},{"name":"Can We Kiss Forever?","artist":"Kina / Adriana Proenza","url":"/lrc/Can We Kiss Forever？.mp3","cover":"http://p1.music.126.net/BgsCl01scHEbWJG0ijOS4A==/109951165687403090.jpg","lrc":"/lrc/Can We Kiss Forever？.lrc"},{"name":"小孩小孩","artist":"刷牙 / ilem","url":"/lrc/小孩小孩.mp3","cover":"http://p1.music.126.net/2l6NtMgh9saAaPe3W11PdA==/109951168268946674.jpg","lrc":"/lrc/小孩小孩.lrc"},{"name":"白鸟过河滩","artist":"洛天依 / ilem","url":"/lrc/白鸟过河滩.mp3","cover":"http://p2.music.126.net/jIrh3oXTi5Yu7Xx4gKXtlw==/109951167486432220.jpg","lrc":"/lrc/白鸟过河滩.lrc"},{"name":"Wings of Piano","artist":"V.K克","url":"/lrc/Wings of Piano.mp3","cover":"https://p2.music.126.net/nxVZ033DIAM7JNHvT-DRMA==/109951163598059944.jpg","lrc":"/lrc/Wings of Piano.lrc"},{"name":"Daylight","artist":"Seredris","url":"https://music.163.com/song/media/outer/url?id=1372188635.mp3","cover":"http://p1.music.126.net/OjiWGpbpC80EbQgkxEayiA==/109951164152228527.jpg","lrc":"/lrc/Daylight.lrc"},{"name":"第105天","artist":"Pianoboy高至豪","url":"https://music.163.com/song/media/outer/url?id=139737.mp3","cover":"http://p1.music.126.net/3HT3AxHq8uXHPbFbH7Qoyw==/109951167208222169.jpg","lrc":"/lrc/第105天.lrc"},{"name":"De Ortu Solis","artist":"Charun","url":"https://music.163.com/song/media/outer/url?id=4015520.mp3","cover":"http://p1.music.126.net/qSZds9TgolZf51XpcYsciw==/703687441819461.jpg","lrc":"/lrc/De Ortu Solis.lrc"},{"name":"Long Journey","artist":"JINBAO","url":"https://music.163.com/song/media/outer/url?id=1857012588.mp3","cover":"http://p1.music.126.net/nVyoxD5yriYaDJPzhaN8Eg==/109951166129162887.jpg","lrc":"/lrc/Long Journey.lrc"},{"name":"Welcome Home","artist":"Radical Face","url":"/lrc/Welcome Home.mp3","cover":"http://p1.music.126.net/TRW7_0KbJXHsb5t3sqZsaw==/6659741930385748.jpg","lrc":"/lrc/Welcome Home.lrc"},{"name":"What U Do","artist":"Wild Culture / Shel Bee","url":"/lrc/What U Do.mp3","cover":"http://p2.music.126.net/oK9lZOiyKUlSSk7vBP7HpQ==/109951165104873935.jpg","lrc":"/lrc/What U Do.lrc"},{"name":"花と水飴、最終電車","artist":"n-buna / 初音ミク","url":"https://music.163.com/song/media/outer/url?id=33367346.mp3","cover":"http://p2.music.126.net/MLoChdXEUHXrpZSwsFPqYw==/7814229139683634.jpg","lrc":"/lrc/花と水飴、最終電車.lrc"},{"name":"ハレハレヤ-朗朗晴天","artist":"鹿小丸","url":"https://music.163.com/song/media/outer/url?id=1346946492.mp3","cover":"http://p1.music.126.net/JRZD6Yb5AVtIcTX7ocyF5w==/109951163872790053.jpg","lrc":"/lrc/ハレハレヤ-朗朗晴天.lrc"},{"name":"飞","artist":"大神慧 / 十七草","url":"https://music.163.com/song/media/outer/url?id=1412030522.mp3","cover":"http://p1.music.126.net/moCls2ann4OX8aAoffXEyg==/109951164579487317.jpg","lrc":"/lrc/飞.lrc"},{"name":"Antisocial","artist":"BEAUZ / Heather Sommer","url":"https://music.163.com/song/media/outer/url?id=550124208.mp3","cover":"http://p2.music.126.net/An4OF_5qGdI0t5MDDSNNwQ==/109951168223377068.jpg","lrc":"/lrc/Antisocial.lrc"},{"name":"Void","artist":"Kirara Magic","url":"https://music.163.com/song/media/outer/url?id=1465790878.mp3","cover":"http://p2.music.126.net/nc5H97uZ-OXgjGW45XtiJA==/109951165172063291.jpg","lrc":"/lrc/Void.lrc"},{"name":"Freefall","artist":"暴君de","url":"https://music.163.com/song/media/outer/url?id=1392203256.mp3","cover":"http://p1.music.126.net/_6L3TL_r61aU9HcjnWeoFw==/109951164376305943.jpg","lrc":"/lrc/Freefall.lrc"},{"name":"Carousel","artist":"DEAMN","url":"https://music.163.com/song/media/outer/url?id=1406443093.mp3","cover":"http://p2.music.126.net/JiQHxzcKFEJ6s8Ge_QHp5Q==/109951164515259189.jpg","lrc":"/lrc/Carousel.lrc"},{"name":"17さいのうた。","artist":"『ユイカ』","url":"https://music.163.com/song/media/outer/url?id=1951665069.mp3","cover":"http://p1.music.126.net/1bcwLzrrKPWcs137biKbpw==/109951167488734005.jpg","lrc":"/lrc/17さいのうた。.lrc"},{"name":"ただ声一つ","artist":"ロクデナシ","url":"/lrc/ただ声一つ.mp3","cover":"http://p1.music.126.net/WMAHZRjSjackfXUmA5GVWw==/109951166778043030.jpg","lrc":"/lrc/ただ声一つ.lrc"},{"name":"懒人","artist":"三无MarBlue","url":"https://music.163.com/song/media/outer/url?id=1462427219.mp3","cover":"http://p2.music.126.net/ExC40_fFwxUgydQINzjqAQ==/109951164669111492.jpg","lrc":"/lrc/懒人.lrc"},{"name":"An Old Song","artist":"MoreanP","url":"https://music.163.com/song/media/outer/url?id=462177081.mp3","cover":"http://p2.music.126.net/JoPwp8la7lf2bFi0UQKn_g==/109951162866713272.jpg","lrc":"/lrc/An Old Song.lrc"},{"name":"雨道","artist":"Otokaze","url":"https://music.163.com/song/media/outer/url?id=493903.mp3","cover":"http://p2.music.126.net/fEvTj3iuLsIcoFWBNFTC4w==/4447524534356140.jpg","lrc":"/lrc/雨道.lrc"},{"name":"夏恋","artist":"Otokaze","url":"https://music.163.com/song/media/outer/url?id=493911.mp3","cover":"http://p2.music.126.net/5gNt0nW6l-2hSAtJAnaNCw==/4450823069239492.jpg","lrc":"/lrc/夏恋.lrc"},{"name":"Cold Winter","artist":"July","url":"/lrc/Cold Winter.mp3","cover":"http://p2.music.126.net/-VVoBbON0-XHXnTg-PVXSw==/7946170535465788.jpg","lrc":"/lrc/Cold Winter.lrc"},{"name":"Where are you","artist":"AniFace","url":"https://music.163.com/song/media/outer/url?id=453843751.mp3","cover":"http://p1.music.126.net/AUfXMljLBgB3PBV731IzRg==/109951162857118370.jpg","lrc":"/lrc/Where are you.lrc"},{"name":"青空","artist":"Candy_Wind","url":"https://music.163.com/song/media/outer/url?id=32717172.mp3","cover":"http://p1.music.126.net/1uWLxBVZ5MLunwuVo5hrzg==/8002245627462629.jpg","lrc":"/lrc/青空1.lrc"},{"name":"Feeling The Rain","artist":"MoreanP","url":"https://music.163.com/song/media/outer/url?id=496774187.mp3","cover":"http://p1.music.126.net/p9Frozdg_luAkO6ENOtTXg==/109951162997219545.jpg","lrc":"/lrc/Feeling The Rain.lrc"},{"name":"森林","artist":"灰澈","url":"/lrc/森林.mp3","cover":"http://p1.music.126.net/gtnxIZw1IKVV6UoxYQoA5A==/109951163393955301.jpg","lrc":"/lrc/森林.lrc"},{"name":"Umbrella","artist":"Matte / Ember Island","url":"/lrc/Umbrella.mp3","cover":"http://p1.music.126.net/1LrtvH8EpKb5iHKR9qEU0Q==/109951163063843501.jpg","lrc":"/lrc/Umbrella.lrc"},{"name":"说书人","artist":"暗杠 / 寅子","url":"https://music.163.com/song/media/outer/url?id=1303019637.mp3","cover":"http://p1.music.126.net/JHXgLgO7SIaVYacrW_wJuw==/109951165246765187.jpg","lrc":"/lrc/说书人.lrc"},{"name":"听书","artist":"暗杠 / 寅子","url":"https://music.163.com/song/media/outer/url?id=1843986876.mp3","cover":"http://p2.music.126.net/djVhMQ8TgaI517Lrg4Fm9w==/109951165968113069.jpg","lrc":"/lrc/听书.lrc"},{"name":"神のまにまに","artist":"初音ミク / 鏡音リン / GUMI / れるりり","url":"https://music.163.com/song/media/outer/url?id=32431066.mp3","cover":"http://p2.music.126.net/DCxO3b9pfFQ8wkREgg16UQ==/109951163743139874.jpg","lrc":"/lrc/神のまにまに.lrc"},{"name":"ふわふわ時間","artist":"放課後ティータイム","url":"https://music.163.com/song/media/outer/url?id=26201899.mp3","cover":"http://p1.music.126.net/B_sCLXthAHgoVEMIRNU1hw==/109951163559682176.jpg","lrc":"/lrc/ふわふわ時間.lrc"},{"name":"朝焼けのスターマイン","artist":"今井麻美","url":"https://music.163.com/song/media/outer/url?id=35345760.mp3","cover":"http://p2.music.126.net/UrHFbNNr1e96Z9EWTQPX7w==/2912606303912879.jpg","lrc":"/lrc/朝焼けのスターマイン.lrc"},{"name":"鼓動","artist":"カグラナナ","url":"https://music.163.com/song/media/outer/url?id=1872078983.mp3","cover":"http://p1.music.126.net/D-3JSGUU_pdOn6c91Wkb6w==/109951166313861666.jpg","lrc":"/lrc/鼓動.lrc"},{"name":"In Your Eyes","artist":"DG812","url":"https://music.163.com/song/media/outer/url?id=1397502846.mp3","cover":"http://p2.music.126.net/anSN1ptUo10Jj2tltSrqew==/109951164432466046.jpg","lrc":"/lrc/In Your Eyes.lrc"},{"name":"YUMEND","artist":"MYUKKE.","url":"https://music.163.com/song/media/outer/url?id=1474404251.mp3","cover":"http://p1.music.126.net/TjCQkgXcQ7WgyYPgb1FquA==/109951166330371133.jpg","lrc":"/lrc/YUMEND.lrc"},{"name":"RyAL-All I know","artist":"Champer","url":"https://music.163.com/song/media/outer/url?id=1824058027.mp3","cover":"http://p2.music.126.net/5gerzS_NGUn3TPbgha5rbQ==/109951165770952681.jpg","lrc":"/lrc/RyAL-All I know.lrc"},{"name":"“Fall Silent”","artist":"Game Tape","url":"https://music.163.com/song/media/outer/url?id=1498957758.mp3","cover":"http://p1.music.126.net/fFUKQs4fLeBNWZA-jAhTgg==/109951165505365193.jpg","lrc":"/lrc/“Fall Silent”.lrc"},{"name":4038,"artist":"JuggShots_RADI8 / 夏璃夜 / Reggie Yang / RADI8","url":"https://music.163.com/song/media/outer/url?id=1406885246.mp3","cover":"http://p1.music.126.net/ntaw2ZudfFxKzFFAPV0OKQ==/109951164985255855.jpg","lrc":"/lrc/4038.lrc"},{"name":"Outerspace","artist":"BEAUZ","url":"/lrc/Outerspace.mp3","cover":"http://p1.music.126.net/nnhkuAvDHZI44e1xFLuLHQ==/109951165308881338.jpg","lrc":"/lrc/Outerspace.lrc"},{"name":"Bring Me Back","artist":"Miles Away","url":"/lrc/Bring Me Back.mp3","cover":"http://p1.music.126.net/m8u6XqT7V8Db8sXdw7d3ow==/109951165400340890.jpg","lrc":"/lrc/Bring Me Back.lrc"},{"name":"Starry Skies","artist":"The Darkmaker / GY","url":"https://music.163.com/song/media/outer/url?id=1836533888.mp3","cover":"http://p2.music.126.net/EOiPbTxVJJCwtj-ftKePhQ==/109951165881650817.jpg","lrc":"/lrc/Starry Skies.lrc"},{"name":"Way To You","artist":"Gareth Emery","url":"https://music.163.com/song/media/outer/url?id=1430240225.mp3","cover":"http://p2.music.126.net/MolpIGnZNmfLSxE0a4A0kg==/109951164795136845.jpg","lrc":"/lrc/Way To You.lrc"},{"name":1984,"artist":"Forwe兰斯 / WERECORDS","url":"https://music.163.com/song/media/outer/url?id=1823013624.mp3","cover":"http://p1.music.126.net/DfhuVKpiFwtzjsC6N-IUmQ==/109951165759178585.jpg","lrc":"/lrc/1984.lrc"},{"name":"Every Day","artist":"VESRIX / The Darkmaker / 赵曼伊mï","url":"https://music.163.com/song/media/outer/url?id=1804141508.mp3","cover":"http://p2.music.126.net/_ARlb95O7dWCnpmMUwpUtQ==/109951165539401727.jpg","lrc":"/lrc/Every Day.lrc"},{"name":"PLANET","artist":"ラムジ","url":"/lrc/PLANET.mp3","cover":"http://p2.music.126.net/cCyPSxi-BE2h-SmpLBztbA==/18635622580993683.jpg","lrc":"/lrc/PLANET.lrc"},{"name":"Hall of Fame","artist":"The Script / will.i.am","url":"/lrc/Hall of Fame.mp3","cover":"http://p2.music.126.net/y3NzeUWXbuHI9Mm5mghD6A==/109951165967126686.jpg","lrc":"/lrc/Hall of Fame.lrc"},{"name":"回る空うさぎ","artist":"Orangestar / 初音ミク","url":"https://music.163.com/song/media/outer/url?id=458231455.mp3","cover":"http://p2.music.126.net/WT3eISFoAum31NVAIKgKWg==/109951165868174091.jpg","lrc":"/lrc/回る空うさぎ.lrc"},{"name":"雨き声残響","artist":"Orangestar / IA","url":"https://music.163.com/song/media/outer/url?id=31830625.mp3","cover":"http://p1.music.126.net/FGYCo9ZtZd-vcOBZXeu-Cg==/109951165868160762.jpg","lrc":"/lrc/雨き声残響.lrc"},{"name":"Surges","artist":"Orangestar / IA","url":"https://music.163.com/song/media/outer/url?id=1872393298.mp3","cover":"http://p1.music.126.net/brRQMx-FhXwW1APZtmNeuw==/109951166317376612.jpg","lrc":"/lrc/Surges.lrc"},{"name":"天ノ弱","artist":"鹿乃","url":"https://music.163.com/song/media/outer/url?id=27602841.mp3","cover":"http://p1.music.126.net/ZvUIE8dl3iM15BXurWgqAg==/5507453743618637.jpg","lrc":"/lrc/天ノ弱.lrc"},{"name":"天ノ弱（Piano ver.）","artist":"Akie秋绘","url":"/lrc/天ノ弱（Piano ver.）.mp3","cover":"http://p1.music.126.net/z68-4CoPo6UQVSPPUKQjeQ==/109951167762964914.jpg","lrc":"/lrc/天ノ弱（Piano ver.）.lrc"},{"name":"アイロニ","artist":"H△G","url":"/lrc/アイロニ.mp3","cover":"http://p1.music.126.net/knuZxQIl0tWXn8bHjnyq_w==/17770306928531115.jpg","lrc":"/lrc/アイロニ.lrc"},{"name":"STAY","artist":"The Kid LAROI / Justin Bieber","url":"/lrc/STAY.mp3","cover":"http://p2.music.126.net/e5cvcdgeosDKTDrkTfZXnQ==/109951166155165682.jpg","lrc":"/lrc/STAY.lrc"},{"name":"Million Days","artist":"Sabai / Hoang / Claire Ridgely","url":"/lrc/Million Days.mp3","cover":"http://p1.music.126.net/OCXJq2VEytCN6xIuS7Raag==/109951164630509914.jpg","lrc":"/lrc/Million Days.lrc"},{"name":"Returns","artist":"Poppin'Party","url":"https://music.163.com/song/media/outer/url?id=1365428127.mp3","cover":"http://p2.music.126.net/fh55GPh3tXUS9Wt0rFNhbw==/109951164971293108.jpg","lrc":"/lrc/Returns.lrc"},{"name":"她追逐着月光的尽头","artist":"warma","url":"https://music.163.com/song/media/outer/url?id=1868711061.mp3","cover":"http://p1.music.126.net/-5kwASaP2-LcTr9VrmnmTg==/109951166273496994.jpg","lrc":"/lrc/她追逐着月光的尽头.lrc"},{"name":"帰路 - KaeriMichi -","artist":"Otokaze","url":"https://music.163.com/song/media/outer/url?id=493945.mp3","cover":"http://p1.music.126.net/tkQc2-C4KT1H8iRSrEyY9g==/858718581293350.jpg","lrc":"/lrc/帰路 - KaeriMichi -.lrc"},{"name":"儿时的夏日","artist":"余日秋山","url":"https://music.163.com/song/media/outer/url?id=467744316.mp3","cover":"http://p1.music.126.net/AoxdNp812wLheBzLBm-zXw==/109951163871163517.jpg","lrc":"/lrc/儿时的夏日.lrc"},{"name":"春日","artist":"四季音色","url":"https://music.163.com/song/media/outer/url?id=409649183.mp3","cover":"http://p2.music.126.net/IzwWL-ULrEKH9FK3pEFLFA==/17857168346938270.jpg","lrc":"/lrc/春日.lrc"},{"name":"夏夜","artist":"四季音色","url":"https://music.163.com/song/media/outer/url?id=410042763.mp3","cover":"http://p2.music.126.net/pk-xo-6Nu5bwrA-ylVJFUA==/17885755649212510.jpg","lrc":"/lrc/夏夜.lrc"},{"name":"心动讯息","artist":"BlackDD","url":"https://music.163.com/song/media/outer/url?id=1458639005.mp3","cover":"http://p2.music.126.net/7inlikcI5GuMLcOl-Zj12w==/109951168185876251.jpg","lrc":"/lrc/心动讯息.lrc"},{"name":"Forever (Epic Edition)","artist":"PIKASONIC","url":"https://music.163.com/song/media/outer/url?id=1462341831.mp3","cover":"http://p2.music.126.net/4eciQbmCZ6AH1GB39SlIfQ==/109951165133997929.jpg","lrc":"/lrc/Forever (Epic Edition).lrc"},{"name":"Never Gonna Give You Up (Piano Version)","artist":"LittleTranscriber","url":"https://music.163.com/song/media/outer/url?id=1870402236.mp3","cover":"http://p1.music.126.net/QkBjOd1aM5aw4GnRmcOUqw==/109951166294709668.jpg","lrc":"/lrc/Never Gonna Give You Up (Piano Version).lrc"},{"name":"Revolution","artist":"高仕超","url":"https://music.163.com/song/media/outer/url?id=1426163928.mp3","cover":"http://p1.music.126.net/qw1ycZSYlBv2CBh4U1H4PQ==/109951164883021091.jpg","lrc":"/lrc/Revolution.lrc"}],
    volume: 0.7,
    mutex: true,
    lrcType: 3,
    listFolded: false,
    listMaxHeight: "340px",
    storageName: "aplayer-setting"
  });
}
document.addEventListener("DOMContentLoaded", initAplayer);
document.addEventListener("pjax:success", initAplayer);</script><script src="https://jsd.vxo.im/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style><!-- hexo injector body_end start --><script src="https://cdn.jsdelivr.net/npm/hexo-widget-tree@0.2.2/js/index.js"></script><div id="widget-tree">
      <ul>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/%E5%85%B6%E4%BB%96/">
          其他
        </a>
      <span class="tree-list-count">1</span><ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/c794d1e9/" title="hexo-encrypt密码插件测试"><i class="post-icon gg-file-document"></i>hexo-encrypt密码插件测试</a></li></ul></li>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/%E5%85%B6%E4%BB%96%E6%95%99%E7%A8%8B/">
          其他教程
        </a>
      <span class="tree-list-count">7</span><ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/33de6690/" title="Github Calendar教程文档"><i class="post-icon gg-file-document"></i>Github Calendar教程文档</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/7fa36b92/" title="Hexo博客SEO相关收录教程"><i class="post-icon gg-file-document"></i>Hexo博客SEO相关收录教程</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/b010393c/" title="PicGO图床配置"><i class="post-icon gg-file-document"></i>PicGO图床配置</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/5df1183b/" title="云游君Hexo部署教程"><i class="post-icon gg-file-document"></i>云游君Hexo部署教程</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/e5a21006/" title="云游君yun主题配置教程"><i class="post-icon gg-file-document"></i>云游君yun主题配置教程</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/d5012c8c/" title="搜索引擎搜索技巧"><i class="post-icon gg-file-document"></i>搜索引擎搜索技巧</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/f6c193b6/" title="解决Vercel CORS跨域问题"><i class="post-icon gg-file-document"></i>解决Vercel CORS跨域问题</a></li></ul></li>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/%E5%BC%80%E5%8F%91%E6%8A%80%E8%83%BD/">
          开发技能
        </a>
      <span class="tree-list-count">6</span><ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/941aaef3/" title="$\KaTeX$ 公式大全"><i class="post-icon gg-file-document"></i>$\KaTeX$ 公式大全</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/c6c59c74/" title="Cmake基础教程"><i class="post-icon gg-file-document"></i>Cmake基础教程</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/249d705/" title="$\KaTeX$ 速查手册"><i class="post-icon gg-file-document"></i>$\KaTeX$ 速查手册</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/6bc3d8a/" title="Linux常用命令手册"><i class="post-icon gg-file-document"></i>Linux常用命令手册</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/cf058d62/" title="Markdown语法教程"><i class="post-icon gg-file-document"></i>Markdown语法教程</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/c4eece1e/" title="git基础教程"><i class="post-icon gg-file-document"></i>git基础教程</a></li></ul></li>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">
          开发环境
        </a>
      <span class="tree-list-count">3</span><ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/f9bb8de7/" title="Qt 开发环境配置"><i class="post-icon gg-file-document"></i>Qt 开发环境配置</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/54ce768c/" title="VScode基本环境配置"><i class="post-icon gg-file-document"></i>VScode基本环境配置</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/e8dec52a/" title="VScode配置Clang和Cmake环境"><i class="post-icon gg-file-document"></i>VScode配置Clang和Cmake环境</a></li></ul></li>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">
          数据结构与算法
        </a>
      <span class="tree-list-count">30</span><ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/b30456ca/" title="01Trie"><i class="post-icon gg-file-document"></i>01Trie</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/1d03a887/" title="AVL树与哈夫曼树"><i class="post-icon gg-file-document"></i>AVL树与哈夫曼树</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/394de44a/" title="gcd 和 lcm"><i class="post-icon gg-file-document"></i>gcd 和 lcm</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/bfaab9bd/" title="乘法逆元"><i class="post-icon gg-file-document"></i>乘法逆元</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/b81a161a/" title="二分枚举"><i class="post-icon gg-file-document"></i>二分枚举</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/8b3a7218/" title="倍增LCA与Tarjan"><i class="post-icon gg-file-document"></i>倍增LCA与Tarjan</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/77a88a6b/" title="前缀和与差分"><i class="post-icon gg-file-document"></i>前缀和与差分</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/a80d0031/" title="动态规划"><i class="post-icon gg-file-document"></i>动态规划</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/a6add1c4/" title="单调栈与单调队列"><i class="post-icon gg-file-document"></i>单调栈与单调队列</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/33e6ada9/" title="图与回溯"><i class="post-icon gg-file-document"></i>图与回溯</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/91a7e4d1/" title="双指针"><i class="post-icon gg-file-document"></i>双指针</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/e8bacb09/" title="差分约束与二分图"><i class="post-icon gg-file-document"></i>差分约束与二分图</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/c517589e/" title="并查集"><i class="post-icon gg-file-document"></i>并查集</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/735e5788/" title="排序算法"><i class="post-icon gg-file-document"></i>排序算法</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/9acb5cb3/" title="最小生成树"><i class="post-icon gg-file-document"></i>最小生成树</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/f216fabe/" title="最短路"><i class="post-icon gg-file-document"></i>最短路</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/6d73f605/" title="权值线段树和主席树"><i class="post-icon gg-file-document"></i>权值线段树和主席树</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/263f4c38/" title="树与二叉树"><i class="post-icon gg-file-document"></i>树与二叉树</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/20c47d09/" title="快速幂"><i class="post-icon gg-file-document"></i>快速幂</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/59a0de58/" title="树状数组与ST表"><i class="post-icon gg-file-document"></i>树状数组与ST表</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/89c44d72/" title="欧拉路径与哈密顿路径"><i class="post-icon gg-file-document"></i>欧拉路径与哈密顿路径</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/515818b4/" title="离散化"><i class="post-icon gg-file-document"></i>离散化</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/f3215fef/" title="算法复杂度分析"><i class="post-icon gg-file-document"></i>算法复杂度分析</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/8893d943/" title="线段树"><i class="post-icon gg-file-document"></i>线段树</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/9ac1aea8/" title="组合数"><i class="post-icon gg-file-document"></i>组合数</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/b2626942/" title="背包问题"><i class="post-icon gg-file-document"></i>背包问题</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/554f2221/" title="质数筛"><i class="post-icon gg-file-document"></i>质数筛</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/a4ce31d2/" title="贪心算法"><i class="post-icon gg-file-document"></i>贪心算法</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/5499b3ee/" title="重链剖分与启发式合并"><i class="post-icon gg-file-document"></i>重链剖分与启发式合并</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/5c43c6e5/" title="高精度算法"><i class="post-icon gg-file-document"></i>高精度算法</a></li></ul></li>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/%E7%AE%97%E6%B3%95%E9%A2%98/">
          算法题
        </a>
      <span class="tree-list-count">13</span><ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/5c63dfdb/" title="C. LR-remainders"><i class="post-icon gg-file-document"></i>C. LR-remainders</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/8e48091a/" title="D - K-th Nearest"><i class="post-icon gg-file-document"></i>D - K-th Nearest</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/d9ea786c/" title="D - Synchronized Players"><i class="post-icon gg-file-document"></i>D - Synchronized Players</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/86fe45f1/" title="D. Find the Different Ones!"><i class="post-icon gg-file-document"></i>D. Find the Different Ones!</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/8abc54c0/" title="E. Final Countdown"><i class="post-icon gg-file-document"></i>E. Final Countdown</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/21e58d4f/" title="P10126 「Daily OI Round 3」Pigeon"><i class="post-icon gg-file-document"></i>P10126 「Daily OI Round 3」Pigeon</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/9120d4e8/" title="P1031 [NOIP2002 提高组] 均分纸牌"><i class="post-icon gg-file-document"></i>P1031 [NOIP2002 提高组] 均分纸牌</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/cdc4662f/" title="P1036 [NOIP2002 普及组] 选数"><i class="post-icon gg-file-document"></i>P1036 [NOIP2002 普及组] 选数</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/8cb1d9bf/" title="P1037 [NOIP2002 普及组] 产生数"><i class="post-icon gg-file-document"></i>P1037 [NOIP2002 普及组] 产生数</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/6cd8f33d/" title="P1060 [NOIP2006 普及组] 开心的金明"><i class="post-icon gg-file-document"></i>P1060 [NOIP2006 普及组] 开心的金明</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/59ee5a77/" title="P1090 [NOIP2004 提高组] 合并果子"><i class="post-icon gg-file-document"></i>P1090 [NOIP2004 提高组] 合并果子</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/2ad6a038/" title="P1147 连续自然数和"><i class="post-icon gg-file-document"></i>P1147 连续自然数和</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/d3586754/" title="P1364 医院设置"><i class="post-icon gg-file-document"></i>P1364 医院设置</a></li></ul></li>
      <li class="tree-list-item">
        <i class="toggle-post-icon gg-folder-add"></i>
        <a class="tree-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">
          编程语言
        </a>
      <span class="tree-list-count">5</span><ul class="tree-list-children"><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/6981023b/" title="C语言类型声明黄金法则"><i class="post-icon gg-file-document"></i>C语言类型声明黄金法则</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/245b3756/" title="Python3爬虫基础"><i class="post-icon gg-file-document"></i>Python3爬虫基础</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/19856b4f/" title="Python3基础教程"><i class="post-icon gg-file-document"></i>Python3基础教程</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/46cf02c7/" title="Cpp基础教程"><i class="post-icon gg-file-document"></i>Cpp基础教程</a></li><li class="tree-list-item"><a class="tree-list-post-link" href="/posts/7e973705/" title="C语言基础教程"><i class="post-icon gg-file-document"></i>C语言基础教程</a></li></ul></li></ul>
        <div id="widget-tree-button">
          <i class="gg-chevron-right"></i>
        </div>
      </div>
  <script data-pjax src="https://jsd.vxo.im/gh/barry-flynn/hexo-github-calendar/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://calendar.muyun.space/api/?user=ShanMuYunQiu";
            var git_color =['#ebedf0', '#ffd1b3', '#ffb380', '#ffa366', '#ff9c59', '#ff944d', '#ff8c40', '	#ff8533', '#ff7d26', '#ff7519', '#ff6600'];
            var git_user ="ShanMuYunQiu";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<head><style type="text/css">@media (max-width: 1000px){.recent-post-item{width:90% !important;}}@media (min-width: 1000px){.recent-post-item{max-width:940px;width:100%;margin:0 auto;}}@media (max-width: 480px){.recent-post-item{padding:10px;}}</style><link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml,sitemap.txt"></head><div class="recent-post-item" style="width:100%;height:auto;padding:20px;"><div id="github_loading" style="text-align:center;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" style="width:50px;height:50px;margin:0 auto;"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log("已挂载hexo-github-calendar https://github.com/Barry-Flynn/hexo-github-calendar");
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><!-- hexo injector body_end end --><script src="https://jsd.vxo.im/npm/live2d-widget@3.x/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"https://jsd.vxo.im/npm/live2d-widget-model-wanko@latest/assets/wanko.model.json"},"display":{"superSample":2,"width":200,"height":400,"position":"right","hOffset":0,"vOffset":-100},"mobile":{"show":false},"dialog":{"enable":false,"hitokoto":false},"log":false});</script></body></html>